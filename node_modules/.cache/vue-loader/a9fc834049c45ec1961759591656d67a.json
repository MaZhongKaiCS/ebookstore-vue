{"remainingRequest":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookReader.vue","mtime":1626254142413},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOS9v+eUqCBtYXBHZXR0ZXJzIOadpeW/q+mAn+iwg+eUqCB2dWV4IOS4reeahOWvueixoQovLyBpbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKLy8g5byV5YWlIG1peGluLmpzIOadpeS7o+abvyBtYXBHZXR0ZXIgbWFwQWN0aW9uc++8iG1peGluLmpzIOmbhuS4reeuoeeQhiBtYXBHZXR0ZXJz77yJCmltcG9ydCB7IGVib29rTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9taXhpbicKLy8g5L2/55SoIG1hcEFjdGlvbnMg5Y6f55CG6LefIG1hcEdldHRlcnMg5beu5LiN5aSa77yMbWFwQWN0aW9uc+aYr+W8leWFpeWumuS5ieWcqHZ1ZXgg5LitIGFjdGlvcyDmiJbogIXmmK/ni6znq4vlh7rmnaXnmoQgYWN0aW9ucy5qcyDkuK3nmoTmlrnms5UKLy8g6L+Y5piv6LefIG1hcEdldHRlcnMg5LiA5qC377yM5pS+5YWl5YiwIG1peGluLmpzIOS4rembhuS4reeuoeeQhgovLyBpbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKLy8g5byV5YWl5pys5qyh6aG555uu55qE5qC45b+DIEVwdWJqcwppbXBvcnQgRXB1YiBmcm9tICdlcHVianMnCi8vIOW8leWFpSBib29rLmpzIOS4reeahCBhZGRDc3Mg5pa55rOV5p2l5biu5Yqp5pS55Y+Y5YWo5bGA5qC35byPIGluaXRHbG9iYWxTdHlsZSgpLOeUseS6jumcgOimgeWcqOWkmuS4que7hOS7tuS4reS9v+eUqO+8jOaJgOS7peWQjuacn+enu+WFpSBtaXhpbi5qcyDkuK0KLy8gaW1wb3J0IHsgYWRkQ3NzIH0gZnJvbSAnLi4vLi4vdXRpbHMvYm9vayc7Ci8vIOacieWFs+acrOWcsOe8k+WtmOeahOaWh+S7tgppbXBvcnQgewogIGdldEZvbnRGYW1pbHksCiAgZ2V0Rm9udFNpemUsIGdldExvY2F0aW9uLCBnZXRUaGVtZSwKICBzYXZlRm9udEZhbWlseSwKICBzYXZlRm9udFNpemUsIHNhdmVUaGVtZQp9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2FsU3RvcmFnZSc7Cmdsb2JhbC5lUHViID0gRXB1YgoKZXhwb3J0IGRlZmF1bHQgewogIC8vIOS9v+eUqCBtaXhpbnMg5pa55rOV5p2l5byV55So5byV5YWl6L+b5p2l55qEIG1peGluLmpzIOS4reeahOiHquWumuS5ieWvueixoQogIG1peGluczogW2Vib29rTWl4aW5dLAogIG1ldGhvZHM6IHsKICAgIC8vIOS9v+eUqCBtYXBBY3Rpb25zIOadpeW8leWFpSBhY3Rpb3MuanMg5Lit55qE5pa55rOVLCDlvJXlhaXkuYvlkI7lsLHlj6/ku6Xnm7TmjqXkvb/nlKggdGhpcy54eCgpIOadpeS9v+eUqHh45pa55rOVCiAgICAvLyDov5jmmK/ot58gbWFwR2V0dGVycyDkuIDmoLfvvIzmlL7lhaXliLAgbWl4aW4uanMg5Lit6ZuG5Lit566h55CGCiAgICAvLyAuLi5tYXBBY3Rpb25zKFsnc2V0TWVudVZpc2libGUnXSksCiAgICAvLyDlkJHliY3nv7vpobXkuovku7YKICAgIHByZXZQYWdlKCkgewogICAgLy8gIOmmluWFiOWIpOaWreeUteWtkOS5puaYr+WQpuWtmOWcqO+8jOeEtuWQjuWGjeaJp+ihjAogICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi5wcmV2KCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnJlZnJlc2hMb2NhdGlvbigpCiAgICAgICAgfSkKICAgICAgICAvLyDlvJXnlKggaGlkZVRpdGxlQW5kTWVudSDmlrnms5XmnaXlrp7njrDnv7vpobXpmpDol4/oj5zljZXmoI8KICAgICAgICB0aGlzLmhpZGVUaXRsZUFuZE1lbnUoKQogICAgICB9CiAgICB9LAogICAgLy8g5ZCR5ZCO57+76aG15LqL5Lu2CiAgICBuZXh0UGFnZSgpIHsKICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24ubmV4dCgpLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5yZWZyZXNoTG9jYXRpb24oKQogICAgICAgIH0pCiAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCkKICAgICAgfQogICAgfSwKICAgIC8vIOW8ueWHuuiPnOWNleagj+S6i+S7tuS6i+S7tizpgJrov4cgJHN0b3JlLmRpc3BhdGNoIOadpeiwg+eUqOWcqHZ1ZXgg5Lit5a6a5LmJ55qE5pa55rOVIHNldE1lbnVWaXNpYmxl77yM5ZCO6Z2i5byV5YWl5LqGIG1hcEFjdGlvbnMg5p2l5byV5YWl5pa55rOV77yM5L2/55So5pa55rOV5pu05Yqg5L6/5o2344CCCiAgICAvLyDlsIYgYWN0aW9ucyDni6znq4vlh7rmnaXlvaLmiJAgYWN0aW9ucy5qcyDmlofku7bvvIzkvb/nlKggbWl4aW4uanMg5paH5Lu26L+b6KGM6ZuG5Lit5byV5YWl77yM5pyA5ZCO5byV5YWlIG1peGluLmpzIOWNs+WPrwogICAgdG9nZ2xlVGl0bGVBbmRNZW51KCkgewogICAgICB0aGlzLnNldE1lbnVWaXNpYmxlKCF0aGlzLm1lbnVWaXNpYmxlKQogICAgICAvLyDlnKggdG9nZ2xlVGl0bGVBbmRNZW51IOS6i+S7tuinpuWPkeaXtu+8jOWmguaenCBtZW51IOW8ueWHuu+8jOWImeWtl+S9kyBTZXR0aW5nRm9udCDkuI3lsZXnpLrvvIznm7TliLDngrnlh7vop6blj5EgU2V0U2V0dGluZ1Zpc2libGXkuovku7bmiY3lvLnlh7rlrZflj7forr7nva7nqpflj6MKICAgICAgaWYgKHRoaXMubWVudVZpc2libGUpIHsKICAgICAgICB0aGlzLnNldFNldHRpbmdWaXNpYmxlKC0xKQogICAgICB9CiAgICAgIHRoaXMuc2V0Rm9udEZhbWlseVZpc2libGUoZmFsc2UpCiAgICB9LAogICAgaGlkZVRpdGxlQW5kTWVudSgpIHsKICAgICAgdGhpcy5zZXRNZW51VmlzaWJsZShmYWxzZSkKICAgICAgLy8g6ZyA5rGC77ya6ZqQ6JeP6I+c5Y2V5qCP5pe277yM5Lmf5ZCM5pe25pS26LW3IOiwg+iKguWtl+WPt+eahOiPnOWNle+8iEVib29rU2V0dGluZ0ZvbnTvvIkKICAgICAgdGhpcy5zZXRTZXR0aW5nVmlzaWJsZSgtMSkKICAgICAgLy8g6ZyA5rGC77ya6ZqQ6JeP6I+c5Y2V5qCP5pe277yM5Lmf5ZCM5pe25pS26LW3ICBmb250LWZhbWlseSDlvLnlh7rlsYIKICAgICAgdGhpcy5zZXRGb250RmFtaWx5VmlzaWJsZShmYWxzZSkKICAgIH0sCiAgICAvLyDnvJPlrZjnmoTmgJ3ot6/vvJrlnKggbG9jYWxTdG9yYWdlLmpzIOS4reWumuS5iSBnZXQg5ZKMIHNhdmUg5pa55rOV77yM5YWI6I635Y+W6aG16Z2i5Lit55qEeHh477yM5Yik5pat5piv5ZCm5ZCr5pyJIHh4eO+8jOWmguaenOayoeacie+8jOWImeiOt+WPliB4eHgg5bm25L+d5a2YIHNhdmXvvIh4eHjvvInvvIzlpoLmnpzmnInvvIzliJnmlLnlj5jpobXpnaLnmoQgeHh4IOWxnuaAp++8jOW5tuS4lOiuvue9ruS4uum7mOiupOS4uuS6hue8k+WtmAogICAgLy8g57yT5a2Y5a2X5Y+35aSn5bCP55qE5pa55rOV77yM5ZyoIGluaXRFcHViIOaWueazleS4rea4suafk+WHuueUteWtkOS5puWQjui/m+ihjOW8leeUqCwKICAgIGluaXRGb250U2l6ZSgpIHsKICAgICAgY29uc3QgZm9udFNpemUgPSBnZXRGb250U2l6ZSh0aGlzLmZpbGVOYW1lKQogICAgICBpZiAoIWZvbnRTaXplKSB7CiAgICAgICAgc2F2ZUZvbnRTaXplKHRoaXMuZmlsZU5hbWUsIHRoaXMuZGVmYXVsdEZvbnRTaXplKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVuZGl0aW9uLnRoZW1lcy5mb250U2l6ZShmb250U2l6ZSkKICAgICAgICB0aGlzLnNldERlZmF1bHRGb250U2l6ZShmb250U2l6ZSkKICAgICAgfQogICAgfSwKICAgIC8vIOe8k+WtmOWtl+S9k+mjjuagvOeahOaWueazle+8jOWcqCBpbml0RXB1YiDmlrnms5XkuK3muLLmn5Plh7rnlLXlrZDkuablkI7ov5vooYzlvJXnlKgKICAgIGluaXRGb250RmFtaWx5KCkgewogICAgICBjb25zdCBmb250RmFtaWx5ID0gZ2V0Rm9udEZhbWlseSh0aGlzLmZpbGVOYW1lKQogICAgICBpZiAoIWZvbnRGYW1pbHkpIHsKICAgICAgICBzYXZlRm9udEZhbWlseSh0aGlzLmZpbGVOYW1lLCB0aGlzLmRlZmF1bHRGb250RmFtaWx5KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVuZGl0aW9uLnRoZW1lcy5mb250KGZvbnRGYW1pbHkpCiAgICAgICAgdGhpcy5zZXREZWZhdWx0Rm9udEZhbWlseShmb250RmFtaWx5KQogICAgICB9CiAgICB9LAogICAgLy8g57yT5a2Y5Li76aKY55qE5pa55rOV77yM5ZyoIGluaXRFcHViIOaWueazleS4rea4suafk+WHuueUteWtkOS5puWQjui/m+ihjOW8leeUqAogICAgaW5pdFRoZW1lKCkgewogICAgICAgIGxldCBkZWZhdWx0VGhlbWUgPSBnZXRUaGVtZSh0aGlzLmZpbGVOYW1lKQogICAgICAgIGlmICghZGVmYXVsdFRoZW1lKSB7CiAgICAgICAgICBkZWZhdWx0VGhlbWUgPSB0aGlzLnRoZW1lTGlzdFswXS5uYW1lCiAgICAgICAgICBzYXZlVGhlbWUodGhpcy5maWxlTmFtZSwgZGVmYXVsdFRoZW1lKQogICAgICAgIH0KICAgICAgICB0aGlzLnNldERlZmF1bHRUaGVtZShkZWZhdWx0VGhlbWUpCiAgICAgICAgdGhpcy50aGVtZUxpc3QuZm9yRWFjaCh0aGVtZSA9PiB7CiAgICAgICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMucmVnaXN0ZXIodGhlbWUubmFtZSwgdGhlbWUuc3R5bGUpCiAgICAgICAgfSkKICAgICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMuc2VsZWN0KGRlZmF1bHRUaGVtZSkKICAgIH0sCiAgICAvLyDmuLLmn5PnlLXlrZDkuabnmoTmlrnms5UKICAgIGluaXRSZW5kaXRpb24oKSB7CiAgICAgIHRoaXMucmVuZGl0aW9uID0gdGhpcy5ib29rLnJlbmRlclRvKCdyZWFkJywgewogICAgICAgIHdpZHRoOiBpbm5lcldpZHRoLAogICAgICAgIGhlaWdodDogaW5uZXJIZWlnaHQsCiAgICAgICAgLy8gIOWKoOWFpeW+ruS/oeeahOWFvOWuueaAp+mFjee9rgogICAgICAgIC8vIOeUseS6jumDqOWIhueahOa1j+iniOWZqOaXoOazleaYvuekuiDmioogZXB1YmpzIOeahOeJiOacrOaUueS4ujAuMy43MSAgIGNucG0gaSBlcHVianNAMC4zLjcxCiAgICAgICAgbWV0aG9kOiAnZGVmYXVsdCcKICAgICAgfSkKICAgICAgLy8g5riy5p+T55S15a2Q5LmmLOW5tuS4lOa3u+WKoOS4gOasoeWIneWni+WMlueahOa4suafk++8jOiusOW9leS4i+WIneWni+WMlueahOm7mOiupOWtl+S9k1zlrZflj7dc5Li76aKYCiAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24odGhpcy5maWxlTmFtZSkKICAgICAgdGhpcy5kaXNwbGF5KGxvY2F0aW9uLCAoKSA9PiB7CiAgICAgICAgdGhpcy5pbml0VGhlbWUoKQogICAgICAgIHRoaXMuaW5pdEZvbnRGYW1pbHkoKQogICAgICAgIHRoaXMuaW5pdEZvbnRTaXplKCkKICAgICAgICB0aGlzLmluaXRHbG9iYWxTdHlsZSgpCiAgICAgIH0pCiAgICAgIHRoaXMucmVuZGl0aW9uLmhvb2tzLmNvbnRlbnQucmVnaXN0ZXIoY29udGVudHMgPT4gewogICAgICAgIFByb21pc2UuYWxsKFsKICAgICAgICAgIC8vIOW9k+WKoOWFpeadpeiHqi5lbnYuZGV2ZWxvcG1lbnQg5paH5Lu25Lit55qEVlVFX0FQUF9SRVNfVVJM5ZCO77yM6ZyA6KaB5bCG5pW05Liq56iL5bqP6YeN5paw5Yqg6L295LiA6YGN5omN6IO95aSf55yL5Yiw5pWI5p6cCiAgICAgICAgICBjb250ZW50cy5hZGRTdHlsZXNoZWV0KGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTH0vZm9udHMvZGF5c09uZS5jc3NgKSwKICAgICAgICAgIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMfS9mb250cy9jYWJpbi5jc3NgKSwKICAgICAgICAgIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMfS9mb250cy9tb250c2VycmF0LmNzc2ApLAogICAgICAgICAgY29udGVudHMuYWRkU3R5bGVzaGVldChgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkx9L2ZvbnRzL3RhbmdlcmluZS5jc3NgKQogICAgICAgIF0pLnRoZW4oKCkgPT4ge30pCiAgICAgIH0pCiAgICB9LAogICAgLy8g5omL5Yq/5pa55rOVCiAgICBpbml0R2VzdHVyZSgpIHsKICAgICAgLy8g57uZ55S15a2Q5Lmm57uR5a6a5bGP5bmV55qE5omL5Yq/5LqL5Lu2IHRvdWNoc3RhcnQg77ya6Kem5pG45bGP5bmV5LqL5Lu2ICB0b3VjaGVuZO+8muemu+W8gOWxj+W5leS6i+S7tgogICAgICAvLyDkuovku7blhoXpg6jmnInlsZ7mgKflj6/ku6Xmk43kvZzvvIzlhbbkuK3mmK8gdGltZVN0YW1w5Y+v5Lul55So5LqO6K6k5a6a6ZW/5oyJ5bGe5LqO5peg5pWI5pON5L2c77yMY2hhbmdlZFRvdWNoZXMg6YeM6Z2i55qE56ys5LiA5Liq5bGe5oCn5Li6IOWIpOaWreWHoOagueaJi+aMh+eahOaTjeS9nO+8jAogICAgICAvLyDnrKzkuIDkuKrlsZ7mgKflhoXpg6jnmoQgY2xpZW50WCDkuLrmsLTlubPmlrnlkJHnmoTnp7vliqjvvIjmoLnmja7lj5jljJbmnaXliKTmlq3lkJHlt6bov5jmmK/lkJHlj7PliJLliqjvvIkKICAgICAgdGhpcy5yZW5kaXRpb24ub24oJ3RvdWNoc3RhcnQnLCBldmVudCA9PiB7CiAgICAgICAgdGhpcy50b3VjaHN0YXJ0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgKICAgICAgICB0aGlzLnRvdWNoc3RhcnRUaW1lID0gZXZlbnQudGltZVN0YW1wCiAgICAgIH0pCiAgICAgIHRoaXMucmVuZGl0aW9uLm9uKCd0b3VjaGVuZCcsIGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBvZmZzZXRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMudG91Y2hzdGFydFgKICAgICAgICBjb25zdCB0aW1lID0gZXZlbnQudGltZVN0YW1wIC0gdGhpcy50b3VjaHN0YXJ0VGltZQogICAgICAgIC8vIGNvbnNvbGUubG9nKG9mZnNldFgsIHRpbWUpOwogICAgICAgIC8vIOmcgOaxgu+8muaJi+aMh+aTjeS9nOeahOS6i+S7tuS4jeiDveWkp+S6jiA1MDAg5q+r56eS77yM5YiS5Yqo55qE6Led56a76KaB5aSn5LqOIDQwCiAgICAgICAgaWYgKHRpbWUgPCA1MDAgJiYgb2Zmc2V0WCA+IDQwKSB7CiAgICAgICAgICB0aGlzLnByZXZQYWdlKCkKICAgICAgICB9IGVsc2UgaWYgKHRpbWUgPCA1MDAgJiYgb2Zmc2V0WCA8IC00MCkgewogICAgICAgICAgdGhpcy5uZXh0UGFnZSgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudG9nZ2xlVGl0bGVBbmRNZW51KCkKICAgICAgICB9CiAgICAgICAgLy8g56aB5q2i5LqL5Lu255qE6buY6K6k5pa55rOV6LCD55So5ZKM5Lyg5pKtCiAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgfQogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpCiAgICAgIH0pCiAgICB9LAogICAgaW5pdEVwdWIoKSB7CiAgICAgIC8vIOWdke+8muS5i+WJjeiuvue9riBOZ2lueCDml7borr7nva7nq6/lj6Plj7fkuLogODA4MQogICAgICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwgKyAnL2VwdWIvJyArIHRoaXMuZmlsZU5hbWUgKyAnLmVwdWInCiAgICAgIC8vIGNvbnNvbGUubG9nKHVybCk7CiAgICAgIHRoaXMuYm9vayA9IG5ldyBFcHViKHVybCkKICAgICAgdGhpcy5zZXRDdXJyZW50Qm9vayh0aGlzLmJvb2spCiAgICAgIHRoaXMuaW5pdFJlbmRpdGlvbigpCiAgICAgIHRoaXMuaW5pdEdlc3R1cmUoKQogICAgICAvLyDlnKjnlLXlrZDkuablhajpg6jop6PmnpDkuYvlkI7osIPnlKggcmVhZHkKICAgICAgdGhpcy5ib29rLnJlYWR5LnRoZW4oKCkgPT4gewogICAgICAgIHJldHVybiB0aGlzLmJvb2subG9jYXRpb25zLmdlbmVyYXRlKDc1MCAqICh3aW5kb3cuaW5uZXJXaWR0aCAvIDM3NSkgKiAoZ2V0Rm9udFNpemUodGhpcy5maWxlTmFtZSkgLyAxNikpCiAgICAgICAgfSkudGhlbihsb2NhdGlvbnMgPT4gewogICAgICAgIHRoaXMuc2V0Qm9va0F2YWlsYWJsZSh0cnVlKQogICAgICAgIHRoaXMucmVmcmVzaExvY2F0aW9uKCkKICAgICAgfSkKICAgIH0KICB9LAogIC8vIOS9v+eUqOeUn+WRveWRqOacn+WHveaVsOS4reeahCBtb3VudGVkIOaWueazleadpeiOt+WPluWKqOaAgei3r+eUsQogIG1vdW50ZWQoKSB7CiAgICAvLyBjb25zdCBmaWxlTmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlTmFtZQogICAgLy8gY29uc29sZS5sb2coZmlsZU5hbWUpOwogICAgLy8gc3BsaXQg5pa55rOV77ya5LulIHh4eCDkuLrnlYzpmZDliJLliIbojrflj5bnmoTnu5PmnpwKICAgIC8vIGpvaW4g5pa55rOV77ya5LulIHh4eCDlsIbojrflj5bnmoTnu5PmnpzlkIjlubblnKjkuIDotbcKICAgIC8vIGNvbnN0IGJhc2VVcmwgPSAnaHR0cDovLzE5Mi4xNjguMzEuMTMzOjgwODEvZXB1Yi8nCiAgICAvLyBjb25zdCBmaWxlTmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlTmFtZS5zcGxpdCgnfCcpLmpvaW4oJy8nKQogICAgdGhpcy5zZXRGaWxlTmFtZSh0aGlzLiRyb3V0ZS5wYXJhbXMuZmlsZU5hbWUuc3BsaXQoJ3wnKS5qb2luKCcvJykpLnRoZW4oKCkgPT4gewogICAgICB0aGlzLmluaXRFcHViKCkKICAgIH0pCiAgfQp9Cg=="},{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookReader.vue","sourceRoot":"src/components/ebook","sourcesContent":["<!--用于接收动态路由的组件-->\n<template>\n  <div class=\"ebook-reader\">\n    <div id=\"read\"></div>\n  </div>\n</template>\n\n<script>\n  // 使用 mapGetters 来快速调用 vuex 中的对象\n  // import { mapGetters } from 'vuex'\n  // 引入 mixin.js 来代替 mapGetter mapActions（mixin.js 集中管理 mapGetters）\n  import { ebookMixin } from '../../utils/mixin'\n  // 使用 mapActions 原理跟 mapGetters 差不多，mapActions是引入定义在vuex 中 actios 或者是独立出来的 actions.js 中的方法\n  // 还是跟 mapGetters 一样，放入到 mixin.js 中集中管理\n  // import { mapActions } from 'vuex'\n  // 引入本次项目的核心 Epubjs\n  import Epub from 'epubjs'\n  // 引入 book.js 中的 addCss 方法来帮助改变全局样式 initGlobalStyle(),由于需要在多个组件中使用，所以后期移入 mixin.js 中\n  // import { addCss } from '../../utils/book';\n  // 有关本地缓存的文件\n  import {\n    getFontFamily,\n    getFontSize, getLocation, getTheme,\n    saveFontFamily,\n    saveFontSize, saveTheme\n  } from '../../utils/localStorage';\n  global.ePub = Epub\n\n  export default {\n    // 使用 mixins 方法来引用引入进来的 mixin.js 中的自定义对象\n    mixins: [ebookMixin],\n    methods: {\n      // 使用 mapActions 来引入 actios.js 中的方法, 引入之后就可以直接使用 this.xx() 来使用xx方法\n      // 还是跟 mapGetters 一样，放入到 mixin.js 中集中管理\n      // ...mapActions(['setMenuVisible']),\n      // 向前翻页事件\n      prevPage() {\n      //  首先判断电子书是否存在，然后再执行\n        if (this.rendition) {\n          this.rendition.prev().then(() => {\n            this.refreshLocation()\n          })\n          // 引用 hideTitleAndMenu 方法来实现翻页隐藏菜单栏\n          this.hideTitleAndMenu()\n        }\n      },\n      // 向后翻页事件\n      nextPage() {\n        if (this.rendition) {\n          this.rendition.next().then(() => {\n            this.refreshLocation()\n          })\n          this.hideTitleAndMenu()\n        }\n      },\n      // 弹出菜单栏事件事件,通过 $store.dispatch 来调用在vuex 中定义的方法 setMenuVisible，后面引入了 mapActions 来引入方法，使用方法更加便捷。\n      // 将 actions 独立出来形成 actions.js 文件，使用 mixin.js 文件进行集中引入，最后引入 mixin.js 即可\n      toggleTitleAndMenu() {\n        this.setMenuVisible(!this.menuVisible)\n        // 在 toggleTitleAndMenu 事件触发时，如果 menu 弹出，则字体 SettingFont 不展示，直到点击触发 SetSettingVisible事件才弹出字号设置窗口\n        if (this.menuVisible) {\n          this.setSettingVisible(-1)\n        }\n        this.setFontFamilyVisible(false)\n      },\n      hideTitleAndMenu() {\n        this.setMenuVisible(false)\n        // 需求：隐藏菜单栏时，也同时收起 调节字号的菜单（EbookSettingFont）\n        this.setSettingVisible(-1)\n        // 需求：隐藏菜单栏时，也同时收起  font-family 弹出层\n        this.setFontFamilyVisible(false)\n      },\n      // 缓存的思路：在 localStorage.js 中定义 get 和 save 方法，先获取页面中的xxx，判断是否含有 xxx，如果没有，则获取 xxx 并保存 save（xxx），如果有，则改变页面的 xxx 属性，并且设置为默认为了缓存\n      // 缓存字号大小的方法，在 initEpub 方法中渲染出电子书后进行引用,\n      initFontSize() {\n        const fontSize = getFontSize(this.fileName)\n        if (!fontSize) {\n          saveFontSize(this.fileName, this.defaultFontSize)\n        } else {\n          this.rendition.themes.fontSize(fontSize)\n          this.setDefaultFontSize(fontSize)\n        }\n      },\n      // 缓存字体风格的方法，在 initEpub 方法中渲染出电子书后进行引用\n      initFontFamily() {\n        const fontFamily = getFontFamily(this.fileName)\n        if (!fontFamily) {\n          saveFontFamily(this.fileName, this.defaultFontFamily)\n        } else {\n          this.rendition.themes.font(fontFamily)\n          this.setDefaultFontFamily(fontFamily)\n        }\n      },\n      // 缓存主题的方法，在 initEpub 方法中渲染出电子书后进行引用\n      initTheme() {\n          let defaultTheme = getTheme(this.fileName)\n          if (!defaultTheme) {\n            defaultTheme = this.themeList[0].name\n            saveTheme(this.fileName, defaultTheme)\n          }\n          this.setDefaultTheme(defaultTheme)\n          this.themeList.forEach(theme => {\n            this.rendition.themes.register(theme.name, theme.style)\n          })\n          this.rendition.themes.select(defaultTheme)\n      },\n      // 渲染电子书的方法\n      initRendition() {\n        this.rendition = this.book.renderTo('read', {\n          width: innerWidth,\n          height: innerHeight,\n          //  加入微信的兼容性配置\n          // 由于部分的浏览器无法显示 把 epubjs 的版本改为0.3.71   cnpm i epubjs@0.3.71\n          method: 'default'\n        })\n        // 渲染电子书,并且添加一次初始化的渲染，记录下初始化的默认字体\\字号\\主题\n        const location = getLocation(this.fileName)\n        this.display(location, () => {\n          this.initTheme()\n          this.initFontFamily()\n          this.initFontSize()\n          this.initGlobalStyle()\n        })\n        this.rendition.hooks.content.register(contents => {\n          Promise.all([\n            // 当加入来自.env.development 文件中的VUE_APP_RES_URL后，需要将整个程序重新加载一遍才能够看到效果\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`),\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/cabin.css`),\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`),\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`)\n          ]).then(() => {})\n        })\n      },\n      // 手势方法\n      initGesture() {\n        // 给电子书绑定屏幕的手势事件 touchstart ：触摸屏幕事件  touchend：离开屏幕事件\n        // 事件内部有属性可以操作，其中是 timeStamp可以用于认定长按属于无效操作，changedTouches 里面的第一个属性为 判断几根手指的操作，\n        // 第一个属性内部的 clientX 为水平方向的移动（根据变化来判断向左还是向右划动）\n        this.rendition.on('touchstart', event => {\n          this.touchstartX = event.changedTouches[0].clientX\n          this.touchstartTime = event.timeStamp\n        })\n        this.rendition.on('touchend', event => {\n          const offsetX = event.changedTouches[0].clientX - this.touchstartX\n          const time = event.timeStamp - this.touchstartTime\n          // console.log(offsetX, time);\n          // 需求：手指操作的事件不能大于 500 毫秒，划动的距离要大于 40\n          if (time < 500 && offsetX > 40) {\n            this.prevPage()\n          } else if (time < 500 && offsetX < -40) {\n            this.nextPage()\n          } else {\n            this.toggleTitleAndMenu()\n          }\n          // 禁止事件的默认方法调用和传播\n          if (event.preventDefault) {\n            event.preventDefault()\n          }\n          event.stopPropagation()\n        })\n      },\n      initEpub() {\n        // 坑：之前设置 Nginx 时设置端口号为 8081\n        const url = process.env.VUE_APP_RES_URL + '/epub/' + this.fileName + '.epub'\n        // console.log(url);\n        this.book = new Epub(url)\n        this.setCurrentBook(this.book)\n        this.initRendition()\n        this.initGesture()\n        // 在电子书全部解析之后调用 ready\n        this.book.ready.then(() => {\n          return this.book.locations.generate(750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16))\n          }).then(locations => {\n          this.setBookAvailable(true)\n          this.refreshLocation()\n        })\n      }\n    },\n    // 使用生命周期函数中的 mounted 方法来获取动态路由\n    mounted() {\n      // const fileName = this.$route.params.fileName\n      // console.log(fileName);\n      // split 方法：以 xxx 为界限划分获取的结果\n      // join 方法：以 xxx 将获取的结果合并在一起\n      // const baseUrl = 'http://192.168.31.133:8081/epub/'\n      // const fileName = this.$route.params.fileName.split('|').join('/')\n      this.setFileName(this.$route.params.fileName.split('|').join('/')).then(() => {\n        this.initEpub()\n      })\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}