{"remainingRequest":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookSettingProgress.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookSettingProgress.vue","mtime":1579925468000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGVib29rTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9taXhpbicKCmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtlYm9va01peGluXSwKICBtZXRob2RzOiB7CiAgICBvblByb2dyZXNzQ2hhbmdlKHByb2dyZXNzKSB7CiAgICAgIHRoaXMuc2V0UHJvZ3Jlc3MocHJvZ3Jlc3MpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCkKICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzQmcoKQogICAgICB9KQogICAgfSwKICAgIG9uUHJvZ3Jlc3NJbnB1dChwcm9ncmVzcykgewogICAgICB0aGlzLnNldFByb2dyZXNzKHByb2dyZXNzKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzQmcoKQogICAgICB9KQogICAgfSwKICAgIGRpc3BsYXlQcm9ncmVzcygpIHsKICAgICAgY29uc3QgY2ZpID0gdGhpcy5jdXJyZW50Qm9vay5sb2NhdGlvbnMuY2ZpRnJvbVBlcmNlbnRhZ2UodGhpcy5wcm9ncmVzcyAvIDEwMCkKICAgICAgdGhpcy5kaXNwbGF5KGNmaSkKICAgIH0sCiAgICB1cGRhdGVQcm9ncmVzc0JnKCkgewogICAgICB0aGlzLiRyZWZzLnByb2dyZXNzLnN0eWxlLmJhY2tncm91bmRTaXplID0gYCR7dGhpcy5wcm9ncmVzc30lIDEwMCVgCiAgICB9LAogICAgcHJldlNlY3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLnNlY3Rpb24gPiAwICYmIHRoaXMuYm9va0F2YWlsYWJsZSkgewogICAgICAgIHRoaXMuc2V0U2VjdGlvbih0aGlzLnNlY3Rpb24gLSAxKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuZGlzcGxheVNlY3Rpb24oKQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBuZXh0U2VjdGlvbigpIHsKICAgICAgaWYgKHRoaXMuc2VjdGlvbiA8IHRoaXMuY3VycmVudEJvb2suc3BpbmUubGVuZ3RoIC0gMSAmJiB0aGlzLmJvb2tBdmFpbGFibGUpIHsKICAgICAgICB0aGlzLnNldFNlY3Rpb24odGhpcy5zZWN0aW9uICsgMSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmRpc3BsYXlTZWN0aW9uKCkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgZGlzcGxheVNlY3Rpb24oKSB7CiAgICAgIGNvbnN0IHNlY3Rpb25JbmZvID0gdGhpcy5jdXJyZW50Qm9vay5zZWN0aW9uKHRoaXMuc2VjdGlvbikKICAgICAgaWYgKHNlY3Rpb25JbmZvICYmIHNlY3Rpb25JbmZvLmhyZWYpIHsKICAgICAgICB0aGlzLmRpc3BsYXkoc2VjdGlvbkluZm8uaHJlZikKICAgICAgfQogICAgfQogIH0sCiAgdXBkYXRlZCgpIHsKICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NCZygpCiAgfQp9Cg=="},{"version":3,"sources":["EbookSettingProgress.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookSettingProgress.vue","sourceRoot":"src/components/ebook","sourcesContent":["<template>\n  <transition name=\"slide-up\">\n    <div class=\"setting-wrapper\" v-show=\"menuVisible && settingVisible === 2\">\n      <div class=\"setting-progress\">\n        <div class=\"read-time-wrapper\">\n          <span class=\"read-time-text\">{{getReadTimeText()}}</span>\n          <span class=\"icon-forward\"></span>\n        </div>\n        <div class=\"progress-wrapper\">\n          <div class=\"progress-icon-wrapper\" @click=\"prevSection()\">\n            <span class=\"icon-back\"></span>\n          </div>\n          <input class=\"progress\" type=\"range\"\n                 max=\"100\"\n                 min=\"0\"\n                 step=\"1\"\n                 @change=\"onProgressChange($event.target.value)\"\n                 @input=\"onProgressInput($event.target.value)\"\n                 :value=\"progress\"\n                 :disabled=\"!bookAvailable\"\n                 ref=\"progress\">\n          <div class=\"progress-icon-wrapper\" @click=\"nextSection()\">\n            <span class=\"icon-forward\"></span>\n          </div>\n        </div>\n        <div class=\"text-wrapper\">\n          <span class=\"progress-section-text\">{{getSectionName}}</span>\n          <span>({{bookAvailable ? progress + '%' : '加载中...'}})</span>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\n  import { ebookMixin } from '../../utils/mixin'\n\n  export default {\n    mixins: [ebookMixin],\n    methods: {\n      onProgressChange(progress) {\n        this.setProgress(progress).then(() => {\n          this.displayProgress()\n          this.updateProgressBg()\n        })\n      },\n      onProgressInput(progress) {\n        this.setProgress(progress).then(() => {\n          this.updateProgressBg()\n        })\n      },\n      displayProgress() {\n        const cfi = this.currentBook.locations.cfiFromPercentage(this.progress / 100)\n        this.display(cfi)\n      },\n      updateProgressBg() {\n        this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`\n      },\n      prevSection() {\n        if (this.section > 0 && this.bookAvailable) {\n          this.setSection(this.section - 1).then(() => {\n            this.displaySection()\n          })\n        }\n      },\n      nextSection() {\n        if (this.section < this.currentBook.spine.length - 1 && this.bookAvailable) {\n          this.setSection(this.section + 1).then(() => {\n            this.displaySection()\n          })\n        }\n      },\n      displaySection() {\n        const sectionInfo = this.currentBook.section(this.section)\n        if (sectionInfo && sectionInfo.href) {\n          this.display(sectionInfo.href)\n        }\n      }\n    },\n    updated() {\n      this.updateProgressBg()\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .setting-wrapper {\n    position: absolute;\n    bottom: px2rem(48);\n    left: 0;\n    z-index: 160;\n    width: 100%;\n    height: px2rem(90);\n    background: white;\n    box-shadow: 0 px2rem(-8) px2rem(8) rgba(0, 0, 0, .15);\n    .setting-progress {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      .read-time-wrapper {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: px2rem(40);\n        font-size: px2rem(12);\n        @include center;\n      }\n      .progress-wrapper {\n        width: 100%;\n        height: 100%;\n        @include center;\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        .progress-icon-wrapper {\n          font-size: px2rem(20);\n        }\n        .progress {\n          width: 100%;\n          -webkit-appearance: none;\n          height: px2rem(2);\n          margin: 0 px2rem(10);\n          &:focus {\n            outline: none;\n          }\n          &::-webkit-slider-thumb {\n            -webkit-appearance: none;\n            height: px2rem(20);\n            width: px2rem(20);\n            border-radius: 50%;\n            background: white;\n            box-shadow: 0 4px 4px 0 rgba(0, 0, 0, .15);\n            border: px2rem(1) solid #ddd;\n          }\n        }\n      }\n      .text-wrapper {\n        position: absolute;\n        left: 0;\n        bottom: px2rem(10);\n        width: 100%;\n        color: #333;\n        font-size: px2rem(12);\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        @include center;\n        .progress-section-text {\n          @include ellipsis;\n        }\n      }\n    }\n  }\n</style>\n"]}]}