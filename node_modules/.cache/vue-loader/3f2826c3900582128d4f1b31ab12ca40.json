{"remainingRequest":"/Users/mazhongkai/Desktop/ebook 2/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/mazhongkai/Desktop/ebook 2/vue-ebook/src/components/ebook/EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook 2/vue-ebook/src/components/ebook/EbookReader.vue","mtime":1626793171532},{"path":"/Users/mazhongkai/Desktop/ebook 2/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook 2/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook 2/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook 2/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOS9v+eUqCBtYXBHZXR0ZXJzIOadpeW/q+mAn+iwg+eUqCB2dWV4IOS4reeahOWvueixoQovLyBpbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKLy8g5byV5YWlIG1peGluLmpzIOadpeS7o+abvyBtYXBHZXR0ZXIgbWFwQWN0aW9uc++8iG1peGluLmpzIOmbhuS4reeuoeeQhiBtYXBHZXR0ZXJz77yJCmltcG9ydCB7IGVib29rTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9taXhpbic7Ci8vIOS9v+eUqCBtYXBBY3Rpb25zIOWOn+eQhui3nyBtYXBHZXR0ZXJzIOW3ruS4jeWkmu+8jG1hcEFjdGlvbnPmmK/lvJXlhaXlrprkuYnlnKh2dWV4IOS4rSBhY3Rpb3Mg5oiW6ICF5piv54us56uL5Ye65p2l55qEIGFjdGlvbnMuanMg5Lit55qE5pa55rOVCi8vIOi/mOaYr+i3nyBtYXBHZXR0ZXJzIOS4gOagt++8jOaUvuWFpeWIsCBtaXhpbi5qcyDkuK3pm4bkuK3nrqHnkIYKLy8gaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnCi8vIOW8leWFpeacrOasoemhueebrueahOaguOW/gyBFcHVianMKaW1wb3J0IEVwdWIgZnJvbSAnZXB1YmpzJzsKLy8g5byV5YWlIGJvb2suanMg5Lit55qEIGFkZENzcyDmlrnms5XmnaXluK7liqnmlLnlj5jlhajlsYDmoLflvI8gaW5pdEdsb2JhbFN0eWxlKCks55Sx5LqO6ZyA6KaB5Zyo5aSa5Liq57uE5Lu25Lit5L2/55So77yM5omA5Lul5ZCO5pyf56e75YWlIG1peGluLmpzIOS4rQovLyBpbXBvcnQgeyBhZGRDc3MgfSBmcm9tICcuLi8uLi91dGlscy9ib29rJzsKLy8g5pyJ5YWz5pys5Zyw57yT5a2Y55qE5paH5Lu2CmltcG9ydCB7CiAgZ2V0Rm9udEZhbWlseSwKICBnZXRGb250U2l6ZSwKICBnZXRMb2NhdGlvbiwKICBnZXRUaGVtZSwKICBzYXZlRm9udEZhbWlseSwKICBzYXZlRm9udFNpemUsCiAgc2F2ZVRoZW1lCn0gZnJvbSAnLi4vLi4vdXRpbHMvbG9jYWxTdG9yYWdlJzsKZ2xvYmFsLmVQdWIgPSBFcHViOwoKZXhwb3J0IGRlZmF1bHQgewogIC8vIOS9v+eUqCBtaXhpbnMg5pa55rOV5p2l5byV55So5byV5YWl6L+b5p2l55qEIG1peGluLmpzIOS4reeahOiHquWumuS5ieWvueixoQogIG1peGluczogW2Vib29rTWl4aW5dLAogIG1ldGhvZHM6IHsKICAgIC8vIOS9v+eUqCBtYXBBY3Rpb25zIOadpeW8leWFpSBhY3Rpb3MuanMg5Lit55qE5pa55rOVLCDlvJXlhaXkuYvlkI7lsLHlj6/ku6Xnm7TmjqXkvb/nlKggdGhpcy54eCgpIOadpeS9v+eUqHh45pa55rOVCiAgICAvLyDov5jmmK/ot58gbWFwR2V0dGVycyDkuIDmoLfvvIzmlL7lhaXliLAgbWl4aW4uanMg5Lit6ZuG5Lit566h55CGCiAgICAvLyAuLi5tYXBBY3Rpb25zKFsnc2V0TWVudVZpc2libGUnXSksCiAgICAvLyDlkJHliY3nv7vpobXkuovku7YKICAgIHByZXZQYWdlKCkgewogICAgICAvLyAg6aaW5YWI5Yik5pat55S15a2Q5Lmm5piv5ZCm5a2Y5Zyo77yM54S25ZCO5YaN5omn6KGMCiAgICAgIGlmICh0aGlzLnJlbmRpdGlvbikgewogICAgICAgIHRoaXMucmVuZGl0aW9uLnByZXYoKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMucmVmcmVzaExvY2F0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgICAgLy8g5byV55SoIGhpZGVUaXRsZUFuZE1lbnUg5pa55rOV5p2l5a6e546w57+76aG16ZqQ6JeP6I+c5Y2V5qCPCiAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlkJHlkI7nv7vpobXkuovku7YKICAgIG5leHRQYWdlKCkgewogICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi5uZXh0KCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnJlZnJlc2hMb2NhdGlvbigpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpOwogICAgICB9CiAgICB9LAogICAgLy8g5by55Ye66I+c5Y2V5qCP5LqL5Lu25LqL5Lu2LOmAmui/hyAkc3RvcmUuZGlzcGF0Y2gg5p2l6LCD55So5ZyodnVleCDkuK3lrprkuYnnmoTmlrnms5Ugc2V0TWVudVZpc2libGXvvIzlkI7pnaLlvJXlhaXkuoYgbWFwQWN0aW9ucyDmnaXlvJXlhaXmlrnms5XvvIzkvb/nlKjmlrnms5Xmm7TliqDkvr/mjbfjgIIKICAgIC8vIOWwhiBhY3Rpb25zIOeLrOeri+WHuuadpeW9ouaIkCBhY3Rpb25zLmpzIOaWh+S7tu+8jOS9v+eUqCBtaXhpbi5qcyDmlofku7bov5vooYzpm4bkuK3lvJXlhaXvvIzmnIDlkI7lvJXlhaUgbWl4aW4uanMg5Y2z5Y+vCiAgICB0b2dnbGVUaXRsZUFuZE1lbnUoKSB7CiAgICAgIHRoaXMuc2V0TWVudVZpc2libGUoIXRoaXMubWVudVZpc2libGUpOwogICAgICAvLyDlnKggdG9nZ2xlVGl0bGVBbmRNZW51IOS6i+S7tuinpuWPkeaXtu+8jOWmguaenCBtZW51IOW8ueWHuu+8jOWImeWtl+S9kyBTZXR0aW5nRm9udCDkuI3lsZXnpLrvvIznm7TliLDngrnlh7vop6blj5EgU2V0U2V0dGluZ1Zpc2libGXkuovku7bmiY3lvLnlh7rlrZflj7forr7nva7nqpflj6MKICAgICAgaWYgKHRoaXMubWVudVZpc2libGUpIHsKICAgICAgICB0aGlzLnNldFNldHRpbmdWaXNpYmxlKC0xKTsKICAgICAgfQogICAgICB0aGlzLnNldEZvbnRGYW1pbHlWaXNpYmxlKGZhbHNlKTsKICAgIH0sCiAgICBoaWRlVGl0bGVBbmRNZW51KCkgewogICAgICB0aGlzLnNldE1lbnVWaXNpYmxlKGZhbHNlKTsKICAgICAgLy8g6ZyA5rGC77ya6ZqQ6JeP6I+c5Y2V5qCP5pe277yM5Lmf5ZCM5pe25pS26LW3IOiwg+iKguWtl+WPt+eahOiPnOWNle+8iEVib29rU2V0dGluZ0ZvbnTvvIkKICAgICAgdGhpcy5zZXRTZXR0aW5nVmlzaWJsZSgtMSk7CiAgICAgIC8vIOmcgOaxgu+8mumakOiXj+iPnOWNleagj+aXtu+8jOS5n+WQjOaXtuaUtui1tyAgZm9udC1mYW1pbHkg5by55Ye65bGCCiAgICAgIHRoaXMuc2V0Rm9udEZhbWlseVZpc2libGUoZmFsc2UpOwogICAgfSwKICAgIC8vIOe8k+WtmOeahOaAnei3r++8muWcqCBsb2NhbFN0b3JhZ2UuanMg5Lit5a6a5LmJIGdldCDlkowgc2F2ZSDmlrnms5XvvIzlhYjojrflj5bpobXpnaLkuK3nmoR4eHjvvIzliKTmlq3mmK/lkKblkKvmnIkgeHh477yM5aaC5p6c5rKh5pyJ77yM5YiZ6I635Y+WIHh4eCDlubbkv53lrZggc2F2Ze+8iHh4eO+8ie+8jOWmguaenOacie+8jOWImeaUueWPmOmhtemdoueahCB4eHgg5bGe5oCn77yM5bm25LiU6K6+572u5Li66buY6K6k5Li65LqG57yT5a2YCiAgICAvLyDnvJPlrZjlrZflj7flpKflsI/nmoTmlrnms5XvvIzlnKggaW5pdEVwdWIg5pa55rOV5Lit5riy5p+T5Ye655S15a2Q5Lmm5ZCO6L+b6KGM5byV55SoLAogICAgaW5pdEZvbnRTaXplKCkgewogICAgICBjb25zdCBmb250U2l6ZSA9IGdldEZvbnRTaXplKHRoaXMuZmlsZU5hbWUpOwogICAgICBpZiAoIWZvbnRTaXplKSB7CiAgICAgICAgc2F2ZUZvbnRTaXplKHRoaXMuZmlsZU5hbWUsIHRoaXMuZGVmYXVsdEZvbnRTaXplKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMuZm9udFNpemUoZm9udFNpemUpOwogICAgICAgIHRoaXMuc2V0RGVmYXVsdEZvbnRTaXplKGZvbnRTaXplKTsKICAgICAgfQogICAgfSwKICAgIC8vIOe8k+WtmOWtl+S9k+mjjuagvOeahOaWueazle+8jOWcqCBpbml0RXB1YiDmlrnms5XkuK3muLLmn5Plh7rnlLXlrZDkuablkI7ov5vooYzlvJXnlKgKICAgIGluaXRGb250RmFtaWx5KCkgewogICAgICBjb25zdCBmb250RmFtaWx5ID0gZ2V0Rm9udEZhbWlseSh0aGlzLmZpbGVOYW1lKTsKICAgICAgaWYgKCFmb250RmFtaWx5KSB7CiAgICAgICAgc2F2ZUZvbnRGYW1pbHkodGhpcy5maWxlTmFtZSwgdGhpcy5kZWZhdWx0Rm9udEZhbWlseSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24udGhlbWVzLmZvbnQoZm9udEZhbWlseSk7CiAgICAgICAgdGhpcy5zZXREZWZhdWx0Rm9udEZhbWlseShmb250RmFtaWx5KTsKICAgICAgfQogICAgfSwKICAgIC8vIOe8k+WtmOS4u+mimOeahOaWueazle+8jOWcqCBpbml0RXB1YiDmlrnms5XkuK3muLLmn5Plh7rnlLXlrZDkuablkI7ov5vooYzlvJXnlKgKICAgIGluaXRUaGVtZSgpIHsKICAgICAgbGV0IGRlZmF1bHRUaGVtZSA9IGdldFRoZW1lKHRoaXMuZmlsZU5hbWUpOwogICAgICBpZiAoIWRlZmF1bHRUaGVtZSkgewogICAgICAgIGRlZmF1bHRUaGVtZSA9IHRoaXMudGhlbWVMaXN0WzBdLm5hbWU7CiAgICAgICAgc2F2ZVRoZW1lKHRoaXMuZmlsZU5hbWUsIGRlZmF1bHRUaGVtZSk7CiAgICAgIH0KICAgICAgdGhpcy5zZXREZWZhdWx0VGhlbWUoZGVmYXVsdFRoZW1lKTsKICAgICAgdGhpcy50aGVtZUxpc3QuZm9yRWFjaCgodGhlbWUpID0+IHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMucmVnaXN0ZXIodGhlbWUubmFtZSwgdGhlbWUuc3R5bGUpOwogICAgICB9KTsKICAgICAgdGhpcy5yZW5kaXRpb24udGhlbWVzLnNlbGVjdChkZWZhdWx0VGhlbWUpOwogICAgfSwKICAgIC8vIOa4suafk+eUteWtkOS5pueahOaWueazlQogICAgaW5pdFJlbmRpdGlvbigpIHsKICAgICAgdGhpcy5yZW5kaXRpb24gPSB0aGlzLmJvb2sucmVuZGVyVG8oJ3JlYWQnLCB7CiAgICAgICAgd2lkdGg6IGlubmVyV2lkdGgsCiAgICAgICAgaGVpZ2h0OiBpbm5lckhlaWdodCwKICAgICAgICAvLyAg5Yqg5YWl5b6u5L+h55qE5YW85a655oCn6YWN572uCiAgICAgICAgLy8g55Sx5LqO6YOo5YiG55qE5rWP6KeI5Zmo5peg5rOV5pi+56S6IOaKiiBlcHVianMg55qE54mI5pys5pS55Li6MC4zLjcxICAgY25wbSBpIGVwdWJqc0AwLjMuNzEKICAgICAgICBtZXRob2Q6ICdkZWZhdWx0JwogICAgICB9KTsKICAgICAgLy8g5riy5p+T55S15a2Q5LmmLOW5tuS4lOa3u+WKoOS4gOasoeWIneWni+WMlueahOa4suafk++8jOiusOW9leS4i+WIneWni+WMlueahOm7mOiupOWtl+S9k1zlrZflj7dc5Li76aKYCiAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24odGhpcy5maWxlTmFtZSk7CiAgICAgIHRoaXMuZGlzcGxheShsb2NhdGlvbiwgKCkgPT4gewogICAgICAgIHRoaXMuaW5pdFRoZW1lKCk7CiAgICAgICAgdGhpcy5pbml0Rm9udEZhbWlseSgpOwogICAgICAgIHRoaXMuaW5pdEZvbnRTaXplKCk7CiAgICAgICAgdGhpcy5pbml0R2xvYmFsU3R5bGUoKTsKICAgICAgfSk7CiAgICAgIHRoaXMucmVuZGl0aW9uLmhvb2tzLmNvbnRlbnQucmVnaXN0ZXIoKGNvbnRlbnRzKSA9PiB7CiAgICAgICAgUHJvbWlzZS5hbGwoWwogICAgICAgICAgLy8g5b2T5Yqg5YWl5p2l6IeqLmVudi5kZXZlbG9wbWVudCDmlofku7bkuK3nmoRWVUVfQVBQX1JFU19VUkzlkI7vvIzpnIDopoHlsIbmlbTkuKrnqIvluo/ph43mlrDliqDovb3kuIDpgY3miY3og73lpJ/nnIvliLDmlYjmnpwKICAgICAgICAgIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoCiAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTH0vZm9udHMvZGF5c09uZS5jc3NgCiAgICAgICAgICApLAogICAgICAgICAgY29udGVudHMuYWRkU3R5bGVzaGVldCgKICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMfS9mb250cy9jYWJpbi5jc3NgCiAgICAgICAgICApLAogICAgICAgICAgY29udGVudHMuYWRkU3R5bGVzaGVldCgKICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMfS9mb250cy9tb250c2VycmF0LmNzc2AKICAgICAgICAgICksCiAgICAgICAgICBjb250ZW50cy5hZGRTdHlsZXNoZWV0KAogICAgICAgICAgICBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkx9L2ZvbnRzL3RhbmdlcmluZS5jc3NgCiAgICAgICAgICApCiAgICAgICAgXSkudGhlbigoKSA9PiB7fSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaJi+WKv+aWueazlQogICAgaW5pdEdlc3R1cmUoKSB7CiAgICAgIC8vIOe7meeUteWtkOS5pue7keWumuWxj+W5leeahOaJi+WKv+S6i+S7tiB0b3VjaHN0YXJ0IO+8muinpuaRuOWxj+W5leS6i+S7tiAgdG91Y2hlbmTvvJrnprvlvIDlsY/luZXkuovku7YKICAgICAgLy8g5LqL5Lu25YaF6YOo5pyJ5bGe5oCn5Y+v5Lul5pON5L2c77yM5YW25Lit5pivIHRpbWVTdGFtcOWPr+S7peeUqOS6juiupOWumumVv+aMieWxnuS6juaXoOaViOaTjeS9nO+8jGNoYW5nZWRUb3VjaGVzIOmHjOmdoueahOesrOS4gOS4quWxnuaAp+S4uiDliKTmlq3lh6DmoLnmiYvmjIfnmoTmk43kvZzvvIwKICAgICAgLy8g56ys5LiA5Liq5bGe5oCn5YaF6YOo55qEIGNsaWVudFgg5Li65rC05bmz5pa55ZCR55qE56e75Yqo77yI5qC55o2u5Y+Y5YyW5p2l5Yik5pat5ZCR5bem6L+Y5piv5ZCR5Y+z5YiS5Yqo77yJCiAgICAgIHRoaXMucmVuZGl0aW9uLm9uKCd0b3VjaHN0YXJ0JywgKGV2ZW50KSA9PiB7CiAgICAgICAgdGhpcy50b3VjaHN0YXJ0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgdGhpcy50b3VjaHN0YXJ0VGltZSA9IGV2ZW50LnRpbWVTdGFtcDsKICAgICAgfSk7CiAgICAgIHRoaXMucmVuZGl0aW9uLm9uKCd0b3VjaGVuZCcsIChldmVudCkgPT4gewogICAgICAgIGNvbnN0IG9mZnNldFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIC0gdGhpcy50b3VjaHN0YXJ0WDsKICAgICAgICBjb25zdCB0aW1lID0gZXZlbnQudGltZVN0YW1wIC0gdGhpcy50b3VjaHN0YXJ0VGltZTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhvZmZzZXRYLCB0aW1lKTsKICAgICAgICAvLyDpnIDmsYLvvJrmiYvmjIfmk43kvZznmoTkuovku7bkuI3og73lpKfkuo4gNTAwIOavq+enku+8jOWIkuWKqOeahOi3neemu+imgeWkp+S6jiA0MAogICAgICAgIGlmICh0aW1lIDwgNTAwICYmIG9mZnNldFggPiA0MCkgewogICAgICAgICAgdGhpcy5wcmV2UGFnZSgpOwogICAgICAgIH0gZWxzZSBpZiAodGltZSA8IDUwMCAmJiBvZmZzZXRYIDwgLTQwKSB7CiAgICAgICAgICB0aGlzLm5leHRQYWdlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudG9nZ2xlVGl0bGVBbmRNZW51KCk7CiAgICAgICAgfQogICAgICAgIC8vIOemgeatouS6i+S7tueahOm7mOiupOaWueazleiwg+eUqOWSjOS8oOaSrQogICAgICAgIGlmIChldmVudC5wcmV2ZW50RGVmYXVsdCkgewogICAgICAgICAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRFcHViKCkgewogICAgICAvLyDlnZHvvJrkuYvliY3orr7nva4gTmdpbngg5pe26K6+572u56uv5Y+j5Y+35Li6IDgwODEKICAgICAgY29uc3QgdXJsID0KICAgICAgICBwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwgKyAnL2VwdWIvJyArIHRoaXMuZmlsZU5hbWUgKyAnLmVwdWInOwogICAgICAvLyBjb25zb2xlLmxvZyh1cmwpOwogICAgICB0aGlzLmJvb2sgPSBuZXcgRXB1Yih1cmwpOwogICAgICB0aGlzLnNldEN1cnJlbnRCb29rKHRoaXMuYm9vayk7CiAgICAgIHRoaXMuaW5pdFJlbmRpdGlvbigpOwogICAgICB0aGlzLmluaXRHZXN0dXJlKCk7CiAgICAgIC8vIOWcqOeUteWtkOS5puWFqOmDqOino+aekOS5i+WQjuiwg+eUqCByZWFkeQogICAgICB0aGlzLmJvb2sucmVhZHkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5ib29rLmxvY2F0aW9ucy5nZW5lcmF0ZSgKICAgICAgICAgICAgNzUwICogKHdpbmRvdy5pbm5lcldpZHRoIC8gMzc1KSAqIChnZXRGb250U2l6ZSh0aGlzLmZpbGVOYW1lKSAvIDE2KQogICAgICAgICAgKTsKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuc2V0Qm9va0F2YWlsYWJsZSh0cnVlKTsKICAgICAgICAgIHRoaXMucmVmcmVzaExvY2F0aW9uKCk7CiAgICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyDkvb/nlKjnlJ/lkb3lkajmnJ/lh73mlbDkuK3nmoQgbW91bnRlZCDmlrnms5XmnaXojrflj5bliqjmgIHot6/nlLEgcm91dGVyLnBhcmFtcy5maWxlTmFtZQogIG1vdW50ZWQoKSB7CiAgICAvLyBjb25zdCBmaWxlTmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlTmFtZQogICAgLy8gY29uc29sZS5sb2coZmlsZU5hbWUpOwogICAgLy8gc3BsaXQg5pa55rOV77ya5LulIHh4eCDkuLrnlYzpmZDliJLliIbojrflj5bnmoTnu5PmnpwKICAgIC8vIGpvaW4g5pa55rOV77ya5LulIHh4eCDlsIbojrflj5bnmoTnu5PmnpzlkIjlubblnKjkuIDotbcKICAgIC8vIGNvbnN0IGJhc2VVcmwgPSAnaHR0cDovLzE5Mi4xNjguMzEuMTMzOjgwODEvZXB1Yi8nCiAgICAvLyBjb25zdCBmaWxlTmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlTmFtZS5zcGxpdCgnfCcpLmpvaW4oJy8nKQogICAgdGhpcy5zZXRGaWxlTmFtZSh0aGlzLiRyb3V0ZS5wYXJhbXMuZmlsZU5hbWUuc3BsaXQoJ3wnKS5qb2luKCcvJykpLnRoZW4oCiAgICAgICgpID0+IHsKICAgICAgICB0aGlzLmluaXRFcHViKCk7CiAgICAgIH0KICAgICk7CiAgfQp9Owo="},{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookReader.vue","sourceRoot":"src/components/ebook","sourcesContent":["<!--用于接收动态路由的组件-->\n<template>\n  <div class=\"ebook-reader\">\n    <div id=\"read\"></div>\n  </div>\n</template>\n\n<script>\n// 使用 mapGetters 来快速调用 vuex 中的对象\n// import { mapGetters } from 'vuex'\n// 引入 mixin.js 来代替 mapGetter mapActions（mixin.js 集中管理 mapGetters）\nimport { ebookMixin } from '../../utils/mixin';\n// 使用 mapActions 原理跟 mapGetters 差不多，mapActions是引入定义在vuex 中 actios 或者是独立出来的 actions.js 中的方法\n// 还是跟 mapGetters 一样，放入到 mixin.js 中集中管理\n// import { mapActions } from 'vuex'\n// 引入本次项目的核心 Epubjs\nimport Epub from 'epubjs';\n// 引入 book.js 中的 addCss 方法来帮助改变全局样式 initGlobalStyle(),由于需要在多个组件中使用，所以后期移入 mixin.js 中\n// import { addCss } from '../../utils/book';\n// 有关本地缓存的文件\nimport {\n  getFontFamily,\n  getFontSize,\n  getLocation,\n  getTheme,\n  saveFontFamily,\n  saveFontSize,\n  saveTheme\n} from '../../utils/localStorage';\nglobal.ePub = Epub;\n\nexport default {\n  // 使用 mixins 方法来引用引入进来的 mixin.js 中的自定义对象\n  mixins: [ebookMixin],\n  methods: {\n    // 使用 mapActions 来引入 actios.js 中的方法, 引入之后就可以直接使用 this.xx() 来使用xx方法\n    // 还是跟 mapGetters 一样，放入到 mixin.js 中集中管理\n    // ...mapActions(['setMenuVisible']),\n    // 向前翻页事件\n    prevPage() {\n      //  首先判断电子书是否存在，然后再执行\n      if (this.rendition) {\n        this.rendition.prev().then(() => {\n          this.refreshLocation();\n        });\n        // 引用 hideTitleAndMenu 方法来实现翻页隐藏菜单栏\n        this.hideTitleAndMenu();\n      }\n    },\n    // 向后翻页事件\n    nextPage() {\n      if (this.rendition) {\n        this.rendition.next().then(() => {\n          this.refreshLocation();\n        });\n        this.hideTitleAndMenu();\n      }\n    },\n    // 弹出菜单栏事件事件,通过 $store.dispatch 来调用在vuex 中定义的方法 setMenuVisible，后面引入了 mapActions 来引入方法，使用方法更加便捷。\n    // 将 actions 独立出来形成 actions.js 文件，使用 mixin.js 文件进行集中引入，最后引入 mixin.js 即可\n    toggleTitleAndMenu() {\n      this.setMenuVisible(!this.menuVisible);\n      // 在 toggleTitleAndMenu 事件触发时，如果 menu 弹出，则字体 SettingFont 不展示，直到点击触发 SetSettingVisible事件才弹出字号设置窗口\n      if (this.menuVisible) {\n        this.setSettingVisible(-1);\n      }\n      this.setFontFamilyVisible(false);\n    },\n    hideTitleAndMenu() {\n      this.setMenuVisible(false);\n      // 需求：隐藏菜单栏时，也同时收起 调节字号的菜单（EbookSettingFont）\n      this.setSettingVisible(-1);\n      // 需求：隐藏菜单栏时，也同时收起  font-family 弹出层\n      this.setFontFamilyVisible(false);\n    },\n    // 缓存的思路：在 localStorage.js 中定义 get 和 save 方法，先获取页面中的xxx，判断是否含有 xxx，如果没有，则获取 xxx 并保存 save（xxx），如果有，则改变页面的 xxx 属性，并且设置为默认为了缓存\n    // 缓存字号大小的方法，在 initEpub 方法中渲染出电子书后进行引用,\n    initFontSize() {\n      const fontSize = getFontSize(this.fileName);\n      if (!fontSize) {\n        saveFontSize(this.fileName, this.defaultFontSize);\n      } else {\n        this.rendition.themes.fontSize(fontSize);\n        this.setDefaultFontSize(fontSize);\n      }\n    },\n    // 缓存字体风格的方法，在 initEpub 方法中渲染出电子书后进行引用\n    initFontFamily() {\n      const fontFamily = getFontFamily(this.fileName);\n      if (!fontFamily) {\n        saveFontFamily(this.fileName, this.defaultFontFamily);\n      } else {\n        this.rendition.themes.font(fontFamily);\n        this.setDefaultFontFamily(fontFamily);\n      }\n    },\n    // 缓存主题的方法，在 initEpub 方法中渲染出电子书后进行引用\n    initTheme() {\n      let defaultTheme = getTheme(this.fileName);\n      if (!defaultTheme) {\n        defaultTheme = this.themeList[0].name;\n        saveTheme(this.fileName, defaultTheme);\n      }\n      this.setDefaultTheme(defaultTheme);\n      this.themeList.forEach((theme) => {\n        this.rendition.themes.register(theme.name, theme.style);\n      });\n      this.rendition.themes.select(defaultTheme);\n    },\n    // 渲染电子书的方法\n    initRendition() {\n      this.rendition = this.book.renderTo('read', {\n        width: innerWidth,\n        height: innerHeight,\n        //  加入微信的兼容性配置\n        // 由于部分的浏览器无法显示 把 epubjs 的版本改为0.3.71   cnpm i epubjs@0.3.71\n        method: 'default'\n      });\n      // 渲染电子书,并且添加一次初始化的渲染，记录下初始化的默认字体\\字号\\主题\n      const location = getLocation(this.fileName);\n      this.display(location, () => {\n        this.initTheme();\n        this.initFontFamily();\n        this.initFontSize();\n        this.initGlobalStyle();\n      });\n      this.rendition.hooks.content.register((contents) => {\n        Promise.all([\n          // 当加入来自.env.development 文件中的VUE_APP_RES_URL后，需要将整个程序重新加载一遍才能够看到效果\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\n          )\n        ]).then(() => {});\n      });\n    },\n    // 手势方法\n    initGesture() {\n      // 给电子书绑定屏幕的手势事件 touchstart ：触摸屏幕事件  touchend：离开屏幕事件\n      // 事件内部有属性可以操作，其中是 timeStamp可以用于认定长按属于无效操作，changedTouches 里面的第一个属性为 判断几根手指的操作，\n      // 第一个属性内部的 clientX 为水平方向的移动（根据变化来判断向左还是向右划动）\n      this.rendition.on('touchstart', (event) => {\n        this.touchstartX = event.changedTouches[0].clientX;\n        this.touchstartTime = event.timeStamp;\n      });\n      this.rendition.on('touchend', (event) => {\n        const offsetX = event.changedTouches[0].clientX - this.touchstartX;\n        const time = event.timeStamp - this.touchstartTime;\n        // console.log(offsetX, time);\n        // 需求：手指操作的事件不能大于 500 毫秒，划动的距离要大于 40\n        if (time < 500 && offsetX > 40) {\n          this.prevPage();\n        } else if (time < 500 && offsetX < -40) {\n          this.nextPage();\n        } else {\n          this.toggleTitleAndMenu();\n        }\n        // 禁止事件的默认方法调用和传播\n        if (event.preventDefault) {\n          // event.preventDefault();\n        }\n        event.stopPropagation();\n      });\n    },\n    initEpub() {\n      // 坑：之前设置 Nginx 时设置端口号为 8081\n      const url =\n        process.env.VUE_APP_RES_URL + '/epub/' + this.fileName + '.epub';\n      // console.log(url);\n      this.book = new Epub(url);\n      this.setCurrentBook(this.book);\n      this.initRendition();\n      this.initGesture();\n      // 在电子书全部解析之后调用 ready\n      this.book.ready\n        .then(() => {\n          return this.book.locations.generate(\n            750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16)\n          );\n        })\n        .then(() => {\n          this.setBookAvailable(true);\n          this.refreshLocation();\n        });\n    }\n  },\n  // 使用生命周期函数中的 mounted 方法来获取动态路由 router.params.fileName\n  mounted() {\n    // const fileName = this.$route.params.fileName\n    // console.log(fileName);\n    // split 方法：以 xxx 为界限划分获取的结果\n    // join 方法：以 xxx 将获取的结果合并在一起\n    // const baseUrl = 'http://192.168.31.133:8081/epub/'\n    // const fileName = this.$route.params.fileName.split('|').join('/')\n    this.setFileName(this.$route.params.fileName.split('|').join('/')).then(\n      () => {\n        this.initEpub();\n      }\n    );\n  }\n};\n</script>\n\n<style scoped>\n</style>\n"]}]}