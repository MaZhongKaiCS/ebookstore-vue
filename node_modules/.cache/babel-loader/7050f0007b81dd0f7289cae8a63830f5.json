{"remainingRequest":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookSlideContents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookSlideContents.vue","mtime":1626249030665},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGVib29rTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9taXhpbic7CmltcG9ydCB7IHB4MnJlbSB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2Vib29rTWl4aW5dLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hWaXNpYmxlOiBmYWxzZSwKICAgICAgc2VhcmNoTGlzdDogbnVsbCwKICAgICAgc2VhcmNoVGV4dDogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNlYXJjaFRleHQgJiYgdGhpcy5zZWFyY2hUZXh0Lmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmRvU2VhcmNoKHRoaXMuc2VhcmNoVGV4dCkudGhlbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgX3RoaXMuc2VhcmNoTGlzdCA9IGxpc3Q7CgogICAgICAgICAgX3RoaXMuc2VhcmNoTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaXRlbS5leGNlcnB0ID0gaXRlbS5leGNlcnB0LnJlcGxhY2UoX3RoaXMuc2VhcmNoVGV4dCwgIjxzcGFuIGNsYXNzPVwiY29udGVudC1zZWFyY2gtdGV4dFwiPiIuY29uY2F0KF90aGlzLnNlYXJjaFRleHQsICI8L3NwYW4+IikpOwogICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZG9TZWFyY2g6IGZ1bmN0aW9uIGRvU2VhcmNoKHEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5jdXJyZW50Qm9vay5zcGluZS5zcGluZUl0ZW1zLm1hcChmdW5jdGlvbiAoc2VjdGlvbikgewogICAgICAgIHJldHVybiBzZWN0aW9uLmxvYWQoX3RoaXMyLmN1cnJlbnRCb29rLmxvYWQuYmluZChfdGhpczIuY3VycmVudEJvb2spKS50aGVuKHNlY3Rpb24uZmluZC5iaW5kKHNlY3Rpb24sIHEpKS5maW5hbGx5KHNlY3Rpb24udW5sb2FkLmJpbmQoc2VjdGlvbikpOwogICAgICB9KSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10uY29uY2F0LmFwcGx5KFtdLCByZXN1bHRzKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGRpc3BsYXlDb250ZW50OiBmdW5jdGlvbiBkaXNwbGF5Q29udGVudCh0YXJnZXQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgaGlnaGxpZ2h0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgdGhpcy5kaXNwbGF5KHRhcmdldCwgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5oaWRlVGl0bGVBbmRNZW51KCk7CgogICAgICAgIGlmIChoaWdobGlnaHQpIHsKICAgICAgICAgIF90aGlzMy5jdXJyZW50Qm9vay5yZW5kaXRpb24uYW5ub3RhdGlvbnMuaGlnaGxpZ2h0KHRhcmdldCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjb250ZW50SXRlbVN0eWxlOiBmdW5jdGlvbiBjb250ZW50SXRlbVN0eWxlKGl0ZW0pIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBtYXJnaW5MZWZ0OiAiIi5jb25jYXQocHgycmVtKGl0ZW0ubGV2ZWwgKiAxNSksICJyZW0iKQogICAgICB9OwogICAgfSwKICAgIHNob3dTZWFyY2hQYWdlOiBmdW5jdGlvbiBzaG93U2VhcmNoUGFnZSgpIHsKICAgICAgdGhpcy5zZWFyY2hWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoaWRlU2VhcmNoUGFnZTogZnVuY3Rpb24gaGlkZVNlYXJjaFBhZ2UoKSB7CiAgICAgIHRoaXMuc2VhcmNoVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnNlYXJjaFRleHQgPSAnJzsKICAgICAgdGhpcy5zZWFyY2hMaXN0ID0gbnVsbDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["EbookSlideContents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,SAAA,UAAA,QAAA,mBAAA;AACA,SAAA,MAAA,QAAA,mBAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,UAAA,CADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,KADA;AAEA,MAAA,UAAA,EAAA,IAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,UAAA,KAAA,UAAA,IAAA,KAAA,UAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,UAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,IAAA;;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,KAAA,CAAA,UAAA,gDAAA,KAAA,CAAA,UAAA,aAAA;AACA,mBAAA,IAAA;AACA,WAHA;AAIA,SANA;AAOA;AACA,KAXA;AAYA,IAAA,QAZA,oBAYA,CAZA,EAYA;AAAA;;AACA,aAAA,OAAA,CAAA,GAAA,CACA,KAAA,WAAA,CAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CACA,UAAA,OAAA;AAAA,eAAA,OAAA,CAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CAAA,EACA,IADA,CACA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,EAAA,CAAA,CADA,EAEA,OAFA,CAEA,OAAA,CAAA,MAAA,CAAA,IAAA,CAAA,OAAA,CAFA,CAAA;AAAA,OADA,CADA,EAKA,IALA,CAKA,UAAA,OAAA;AAAA,eAAA,OAAA,CAAA,OAAA,CAAA,GAAA,MAAA,CAAA,KAAA,CAAA,EAAA,EAAA,OAAA,CAAA,CAAA;AAAA,OALA,CAAA;AAMA,KAnBA;AAoBA,IAAA,cApBA,0BAoBA,MApBA,EAoBA;AAAA;;AAAA,UAAA,SAAA,uEAAA,KAAA;AACA,WAAA,OAAA,CAAA,MAAA,EAAA,YAAA;AACA,QAAA,MAAA,CAAA,gBAAA;;AACA,YAAA,SAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,SAAA,CAAA,WAAA,CAAA,SAAA,CAAA,MAAA;AACA;AACA,OALA;AAMA,KA3BA;AA4BA,IAAA,gBA5BA,4BA4BA,IA5BA,EA4BA;AACA,aAAA;AACA,QAAA,UAAA,YAAA,MAAA,CAAA,IAAA,CAAA,KAAA,GAAA,EAAA,CAAA;AADA,OAAA;AAGA,KAhCA;AAiCA,IAAA,cAjCA,4BAiCA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KAnCA;AAoCA,IAAA,cApCA,4BAoCA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,UAAA,GAAA,IAAA;AACA;AAxCA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"ebook-slide-contents\">\n    <div class=\"slide-contents-search-wrapper\">\n      <div class=\"slide-contents-search-input-wrapper\">\n        <div class=\"slide-contents-search-icon\">\n          <span class=\"icon-search\"></span>\n        </div>\n        <input class=\"slide-contents-search-input\"\n               type=\"text\"\n               v-model=\"searchText\"\n               :placeholder=\"$t('book.searchHint')\"\n               @keyup.enter.exact=\"search()\"\n               @click=\"showSearchPage\">\n      </div>\n      <div class=\"slide-contents-search-cancel\"\n           v-if=\"searchVisible\"\n           @click=\"hideSearchPage()\">{{$t('book.cancel')}}\n      </div>\n    </div>\n    <div class=\"slide-contents-book-wrapper\" v-show=\"!searchVisible\">\n      <div class=\"slide-contents-book-img-wrapper\">\n        <img :src=\"cover\" class=\"slide-contents-book-img\">\n      </div>\n      <div class=\"slide-contents-book-info-wrapper\">\n        <div class=\"slide-contents-book-title\">\n          <span class=\"slide-contents-book-title-text\">{{metadata.title}}</span>\n        </div>\n        <div class=\"slide-contents-book-author\">\n          <span class=\"slide-contents-book-author-text\">{{metadata.creator}}</span>\n        </div>\n      </div>\n      <div class=\"slide-contents-book-progress-wrapper\">\n        <div class=\"slide-contents-book-progress\">\n          <span class=\"progress\">{{progress + '%'}}</span>\n          <span class=\"progress-text\">{{$t('book.haveRead2')}}</span>\n        </div>\n        <div class=\"slide-contents-book-time\">{{getReadTimeText()}}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { ebookMixin } from '../../utils/mixin'\n  import { px2rem } from '../../utils/utils'\n\n  export default {\n    mixins: [ebookMixin],\n    components: {\n      \n    },\n    data() {\n      return {\n        searchVisible: false,\n        searchList: null,\n        searchText: ''\n      }\n    },\n    methods: {\n      search() {\n        if (this.searchText && this.searchText.length > 0) {\n          this.doSearch(this.searchText).then(list => {\n            this.searchList = list\n            this.searchList.map(item => {\n              item.excerpt = item.excerpt.replace(this.searchText, `<span class=\"content-search-text\">${this.searchText}</span>`)\n              return item\n            })\n          })\n        }\n      },\n      doSearch(q) {\n        return Promise.all(\n          this.currentBook.spine.spineItems.map(\n            section => section.load(this.currentBook.load.bind(this.currentBook))\n              .then(section.find.bind(section, q))\n              .finally(section.unload.bind(section)))\n        ).then(results => Promise.resolve([].concat.apply([], results)))\n      },\n      displayContent(target, highlight = false) {\n        this.display(target, () => {\n          this.hideTitleAndMenu()\n          if (highlight) {\n            this.currentBook.rendition.annotations.highlight(target)\n          }\n        })\n      },\n      contentItemStyle(item) {\n        return {\n          marginLeft: `${px2rem(item.level * 15)}rem`\n        }\n      },\n      showSearchPage() {\n        this.searchVisible = true\n      },\n      hideSearchPage() {\n        this.searchVisible = false\n        this.searchText = ''\n        this.searchList = null\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .ebook-slide-contents {\n    width: 100%;\n    font-size: 0;\n    .slide-contents-search-wrapper {\n      display: flex;\n      width: 100%;\n      height: px2rem(36);\n      margin: px2rem(20) 0 px2rem(10) 0;\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      .slide-contents-search-input-wrapper {\n        flex: 1;\n        @include center;\n        .slide-contents-search-icon {\n          flex: 0 0 px2rem(28);\n          font-size: px2rem(12);\n          @include center;\n        }\n        .slide-contents-search-input {\n          flex: 1;\n          width: 100%;\n          height: px2rem(32);\n          font-size: px2rem(14);\n          background: transparent;\n          border: none;\n          &:focus {\n            outline: none;\n          }\n        }\n      }\n      .slide-contents-search-cancel {\n        flex: 0 0 px2rem(50);\n        font-size: px2rem(14);\n        @include right;\n      }\n    }\n    .slide-contents-book-wrapper {\n      display: flex;\n      width: 100%;\n      height: px2rem(90);\n      padding: px2rem(10) px2rem(15) px2rem(20) px2rem(15);\n      box-sizing: border-box;\n      .slide-contents-book-img-wrapper {\n        flex: 0 0 px2rem(45);\n        .slide-contents-book-img {\n          width: px2rem(45);\n          height: px2rem(60);\n        }\n      }\n      .slide-contents-book-info-wrapper {\n        flex: 1;\n        padding: 0 px2rem(10);\n        box-sizing: border-box;\n        .slide-contents-book-title {\n          // width: px2rem(153.75);\n          font-size: px2rem(14);\n          line-height: px2rem(16);\n          @include left;\n          .slide-contents-book-title-text {\n            @include ellipsis2(3);\n          }\n        }\n        .slide-contents-book-author {\n          // width: px2rem(153.75);\n          font-size: px2rem(12);\n          line-height: px2rem(14);\n          margin-top: px2rem(5);\n          @include left;\n          .slide-contents-book-author-text {\n            @include ellipsis2(1);\n          }\n        }\n      }\n      .slide-contents-book-progress-wrapper {\n        flex: 0 0 px2rem(70);\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: flex-start;\n        .slide-contents-book-progress {\n          .progress {\n            font-size: px2rem(14);\n          }\n          .progress-text {\n            font-size: px2rem(12);\n          }\n        }\n        .slide-contents-book-time {\n          font-size: px2rem(12);\n          margin-top: px2rem(5);\n        }\n      }\n    }\n    .slide-contents-list {\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      .slide-contents-item {\n        display: flex;\n        padding: px2rem(20) 0;\n        box-sizing: border-box;\n        .slide-contents-item-label {\n          flex: 1;\n          font-size: px2rem(14);\n          line-height: px2rem(16);\n          @include ellipsis;\n        }\n        .slide-contents-item-page {\n          flex: 0 0 px2rem(30);\n          font-size: px2rem(10);\n          @include right;\n        }\n      }\n    }\n    .slide-search-list {\n      width: 100%;\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      .slide-search-item {\n        font-size: px2rem(14);\n        line-height: px2rem(16);\n        padding: px2rem(20) 0;\n        box-sizing: border-box;\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/components/ebook"}]}