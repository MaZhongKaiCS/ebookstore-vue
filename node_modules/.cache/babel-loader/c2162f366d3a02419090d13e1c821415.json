{"remainingRequest":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/babel-loader/lib/index.js!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/eslint-loader/index.js??ref--13-0!/Users/mazhongkai/Desktop/ebook/vue-ebook/src/utils/mixin.js","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/src/utils/mixin.js","mtime":1624282338004},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hemhvbmdrYWkvRGVza3RvcC9lYm9vay92dWUtZWJvb2svbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHRoZW1lTGlzdCBhcyBfdGhlbWVMaXN0LCBhZGRDc3MsIHJlbW92ZUFsbENzcyB9IGZyb20gJy4vYm9vayc7CmltcG9ydCB7IHNhdmVMb2NhdGlvbiB9IGZyb20gJy4vbG9jYWxTdG9yYWdlJzsKZXhwb3J0IHZhciBlYm9va01peGluID0gewogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydmaWxlTmFtZScsICdtZW51VmlzaWJsZScsICdzZXR0aW5nVmlzaWJsZScsICdkZWZhdWx0Rm9udFNpemUnLCAnZGVmYXVsdEZvbnRGYW1pbHknLCAnZm9udEZhbWlseVZpc2libGUnLCAnZGVmYXVsdFRoZW1lJywgJ2Jvb2tBdmFpbGFibGUnLCAncHJvZ3Jlc3MnLCAnc2VjdGlvbicsICdpc1BhZ2luYXRpbmcnLCAnY3VycmVudEJvb2snLCAnbmF2aWdhdGlvbicsICdjb3ZlcicsICdtZXRhZGF0YScsICdwYWdpbmF0ZScsICdwYWdlbGlzdCcsICdvZmZzZXRZJywgJ2lzQm9va21hcmsnXSkpLCB7fSwgewogICAgdGhlbWVMaXN0OiBmdW5jdGlvbiB0aGVtZUxpc3QoKSB7CiAgICAgIHJldHVybiBfdGhlbWVMaXN0KHRoaXMpOwogICAgfQogIH0pLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ3NldEZpbGVOYW1lJywgJ3NldE1lbnVWaXNpYmxlJywgJ3NldFNldHRpbmdWaXNpYmxlJywgJ3NldERlZmF1bHRGb250U2l6ZScsICdzZXREZWZhdWx0Rm9udEZhbWlseScsICdzZXRGb250RmFtaWx5VmlzaWJsZScsICdzZXREZWZhdWx0VGhlbWUnLCAnc2V0Qm9va0F2YWlsYWJsZScsICdzZXRQcm9ncmVzcycsICdzZXRTZWN0aW9uJywgJ3NldElzUGFnaW5hdGluZycsICdzZXRDdXJyZW50Qm9vaycsICdzZXROYXZpZ2F0aW9uJywgJ3NldENvdmVyJywgJ3NldE1ldGFkYXRhJywgJ3NldFBhZ2luYXRlJywgJ3NldFBhZ2VsaXN0JywgJ3NldE9mZnNldFknLCAnc2V0SXNCb29rbWFyayddKSksIHt9LCB7CiAgICAvLyDorr7nva7lhajlsYDmoLflvI/vvIzlvJXlhaVib29rLmpz5Lit55qEIGFkZENzcyDmlrnms5UKICAgIGluaXRHbG9iYWxTdHlsZTogZnVuY3Rpb24gaW5pdEdsb2JhbFN0eWxlKCkgewogICAgICByZW1vdmVBbGxDc3MoKTsKCiAgICAgIHN3aXRjaCAodGhpcy5kZWZhdWx0VGhlbWUpIHsKICAgICAgICBjYXNlICdEZWZhdWx0JzoKICAgICAgICAgIGFkZENzcygiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMLCAiL3RoZW1lL3RoZW1lX2RlZmF1bHQuY3NzIikpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ0V5ZSc6CiAgICAgICAgICBhZGRDc3MoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTCwgIi90aGVtZS90aGVtZV9leWUuY3NzIikpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ0dvbGQnOgogICAgICAgICAgYWRkQ3NzKCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvdGhlbWUvdGhlbWVfZ29sZC5jc3MiKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnTmlnaHQnOgogICAgICAgICAgYWRkQ3NzKCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvdGhlbWUvdGhlbWVfbmlnaHQuY3NzIikpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnlKjkuo7liLfmlrDlvZPliY3kvY3nva4o55Sx5LqO5ZyoIEVib29rU2V0dGluZ1Byb2dyZXNzIOWSjCBFYm9va1JlYWRlciDkuK3pg73pnIDopoHkvb/nlKjvvIzmlYXlsIblhbbmlL7lhaUgbWl4aW4pCiAgICByZWZyZXNoTG9jYXRpb246IGZ1bmN0aW9uIHJlZnJlc2hMb2NhdGlvbigpIHsKICAgICAgdmFyIGN1cnJlbnRMb2NhdGlvbiA9IHRoaXMuY3VycmVudEJvb2sucmVuZGl0aW9uLmN1cnJlbnRMb2NhdGlvbigpOwogICAgICB2YXIgc3RhcnRDZmkgPSBjdXJyZW50TG9jYXRpb24uc3RhcnQuY2ZpOwogICAgICB2YXIgcHJvZ3Jlc3MgPSB0aGlzLmN1cnJlbnRCb29rLmxvY2F0aW9ucy5wZXJjZW50YWdlRnJvbUNmaShzdGFydENmaSk7CiAgICAgIHRoaXMuc2V0UHJvZ3Jlc3MoTWF0aC5mbG9vcihwcm9ncmVzcyAqIDEwMCkpOwogICAgICB0aGlzLnNldFNlY3Rpb24oY3VycmVudExvY2F0aW9uLnN0YXJ0LmluZGV4KTsKICAgICAgc2F2ZUxvY2F0aW9uKHRoaXMuZmlsZU5hbWUsIHN0YXJ0Q2ZpKTsKICAgIH0sCiAgICBkaXNwbGF5OiBmdW5jdGlvbiBkaXNwbGF5KHRhcmdldCwgY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0aGlzLmN1cnJlbnRCb29rLnJlbmRpdGlvbi5kaXNwbGF5KHRhcmdldCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5yZWZyZXNoTG9jYXRpb24oKTsKCiAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJyZW50Qm9vay5yZW5kaXRpb24uZGlzcGxheSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMucmVmcmVzaExvY2F0aW9uKCk7CgogICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["/Users/mazhongkai/Desktop/ebook/vue-ebook/src/utils/mixin.js"],"names":["mapGetters","mapActions","themeList","addCss","removeAllCss","saveLocation","ebookMixin","computed","methods","initGlobalStyle","defaultTheme","process","env","VUE_APP_RES_URL","refreshLocation","currentLocation","currentBook","rendition","startCfi","start","cfi","progress","locations","percentageFromCfi","setProgress","Math","floor","setSection","index","fileName","display","target","callback","then"],"mappings":";AAAA,SAASA,UAAT,EAAqBC,UAArB,QAAuC,MAAvC;AACA,SAASC,SAAS,IAATA,UAAT,EAAoBC,MAApB,EAA4BC,YAA5B,QAAgD,QAAhD;AACA,SAASC,YAAT,QAA6B,gBAA7B;AAEA,OAAO,IAAMC,UAAU,GAAG;AACxBC,EAAAA,QAAQ,kCACHP,UAAU,CAAC,CACZ,UADY,EAEZ,aAFY,EAGZ,gBAHY,EAIZ,iBAJY,EAKZ,mBALY,EAMZ,mBANY,EAOZ,cAPY,EAQZ,eARY,EASZ,UATY,EAUZ,SAVY,EAWZ,cAXY,EAYZ,aAZY,EAaZ,YAbY,EAcZ,OAdY,EAeZ,UAfY,EAgBZ,UAhBY,EAiBZ,UAjBY,EAkBZ,SAlBY,EAmBZ,YAnBY,CAAD,CADP;AAsBNE,IAAAA,SAtBM,uBAsBM;AACV,aAAOA,UAAS,CAAC,IAAD,CAAhB;AACD;AAxBK,IADgB;AA2BxBM,EAAAA,OAAO,kCACFP,UAAU,CAAC,CACZ,aADY,EAEZ,gBAFY,EAGZ,mBAHY,EAIZ,oBAJY,EAKZ,sBALY,EAMZ,sBANY,EAOZ,iBAPY,EAQZ,kBARY,EASZ,aATY,EAUZ,YAVY,EAWZ,iBAXY,EAYZ,gBAZY,EAaZ,eAbY,EAcZ,UAdY,EAeZ,aAfY,EAgBZ,aAhBY,EAiBZ,aAjBY,EAkBZ,YAlBY,EAmBZ,eAnBY,CAAD,CADR;AAsBL;AACAQ,IAAAA,eAvBK,6BAuBa;AAChBL,MAAAA,YAAY;;AACZ,cAAQ,KAAKM,YAAb;AACE,aAAK,SAAL;AACEP,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,8BAAN;AACA;;AACF,aAAK,KAAL;AACEV,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,0BAAN;AACA;;AACF,aAAK,MAAL;AACEV,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,2BAAN;AACA;;AACF,aAAK,OAAL;AACEV,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,4BAAN;AACA;AAZJ;AAcD,KAvCI;AAwCL;AACAC,IAAAA,eAzCK,6BAyCa;AAChB,UAAMC,eAAe,GAAG,KAAKC,WAAL,CAAiBC,SAAjB,CAA2BF,eAA3B,EAAxB;AACA,UAAMG,QAAQ,GAAGH,eAAe,CAACI,KAAhB,CAAsBC,GAAvC;AACA,UAAMC,QAAQ,GAAG,KAAKL,WAAL,CAAiBM,SAAjB,CAA2BC,iBAA3B,CAA6CL,QAA7C,CAAjB;AACA,WAAKM,WAAL,CAAiBC,IAAI,CAACC,KAAL,CAAWL,QAAQ,GAAG,GAAtB,CAAjB;AACA,WAAKM,UAAL,CAAgBZ,eAAe,CAACI,KAAhB,CAAsBS,KAAtC;AACAvB,MAAAA,YAAY,CAAC,KAAKwB,QAAN,EAAgBX,QAAhB,CAAZ;AACD,KAhDI;AAiDLY,IAAAA,OAjDK,mBAiDGC,MAjDH,EAiDWC,QAjDX,EAiDqB;AAAA;;AACxB,UAAID,MAAJ,EAAY;AACV,aAAKf,WAAL,CAAiBC,SAAjB,CAA2Ba,OAA3B,CAAmCC,MAAnC,EAA2CE,IAA3C,CAAgD,YAAM;AACpD,UAAA,KAAI,CAACnB,eAAL;;AACA,cAAIkB,QAAJ,EAAcA,QAAQ;AACvB,SAHD;AAID,OALD,MAKO;AACL,aAAKhB,WAAL,CAAiBC,SAAjB,CAA2Ba,OAA3B,GAAqCG,IAArC,CAA0C,YAAM;AAC9C,UAAA,KAAI,CAACnB,eAAL;;AACA,cAAIkB,QAAJ,EAAcA,QAAQ;AACvB,SAHD;AAID;AACF;AA7DI;AA3BiB,CAAnB","sourcesContent":["import { mapGetters, mapActions } from 'vuex';\nimport { themeList, addCss, removeAllCss } from './book';\nimport { saveLocation } from './localStorage';\n\nexport const ebookMixin = {\n  computed: {\n    ...mapGetters([\n      'fileName',\n      'menuVisible',\n      'settingVisible',\n      'defaultFontSize',\n      'defaultFontFamily',\n      'fontFamilyVisible',\n      'defaultTheme',\n      'bookAvailable',\n      'progress',\n      'section',\n      'isPaginating',\n      'currentBook',\n      'navigation',\n      'cover',\n      'metadata',\n      'paginate',\n      'pagelist',\n      'offsetY',\n      'isBookmark'\n    ]),\n    themeList() {\n      return themeList(this)\n    }\n  },\n  methods: {\n    ...mapActions([\n      'setFileName',\n      'setMenuVisible',\n      'setSettingVisible',\n      'setDefaultFontSize',\n      'setDefaultFontFamily',\n      'setFontFamilyVisible',\n      'setDefaultTheme',\n      'setBookAvailable',\n      'setProgress',\n      'setSection',\n      'setIsPaginating',\n      'setCurrentBook',\n      'setNavigation',\n      'setCover',\n      'setMetadata',\n      'setPaginate',\n      'setPagelist',\n      'setOffsetY',\n      'setIsBookmark'\n    ]),\n    // 设置全局样式，引入book.js中的 addCss 方法\n    initGlobalStyle() {\n      removeAllCss()\n      switch (this.defaultTheme) {\n        case 'Default':\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_default.css`)\n          break\n        case 'Eye':\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_eye.css`)\n          break\n        case 'Gold':\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_gold.css`)\n          break\n        case 'Night':\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_night.css`)\n          break\n      }\n    },\n    // 用于刷新当前位置(由于在 EbookSettingProgress 和 EbookReader 中都需要使用，故将其放入 mixin)\n    refreshLocation() {\n      const currentLocation = this.currentBook.rendition.currentLocation()\n      const startCfi = currentLocation.start.cfi\n      const progress = this.currentBook.locations.percentageFromCfi(startCfi)\n      this.setProgress(Math.floor(progress * 100))\n      this.setSection(currentLocation.start.index)\n      saveLocation(this.fileName, startCfi)\n    },\n    display(target, callback) {\n      if (target) {\n        this.currentBook.rendition.display(target).then(() => {\n          this.refreshLocation()\n          if (callback) callback()\n        })\n      } else {\n        this.currentBook.rendition.display().then(() => {\n          this.refreshLocation()\n          if (callback) callback()\n        })\n      }\n    }\n  }\n}\n"]}]}