{"remainingRequest":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookReader.vue","mtime":1625813284910},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIOS9v+eUqCBtYXBHZXR0ZXJzIOadpeW/q+mAn+iwg+eUqCB2dWV4IOS4reeahOWvueixoQovLyBpbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKLy8g5byV5YWlIG1peGluLmpzIOadpeS7o+abvyBtYXBHZXR0ZXIgbWFwQWN0aW9uc++8iG1peGluLmpzIOmbhuS4reeuoeeQhiBtYXBHZXR0ZXJz77yJCmltcG9ydCB7IGVib29rTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9taXhpbic7IC8vIOS9v+eUqCBtYXBBY3Rpb25zIOWOn+eQhui3nyBtYXBHZXR0ZXJzIOW3ruS4jeWkmu+8jG1hcEFjdGlvbnPmmK/lvJXlhaXlrprkuYnlnKh2dWV4IOS4rSBhY3Rpb3Mg5oiW6ICF5piv54us56uL5Ye65p2l55qEIGFjdGlvbnMuanMg5Lit55qE5pa55rOVCi8vIOi/mOaYr+i3nyBtYXBHZXR0ZXJzIOS4gOagt++8jOaUvuWFpeWIsCBtaXhpbi5qcyDkuK3pm4bkuK3nrqHnkIYKLy8gaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnCi8vIOW8leWFpeacrOasoemhueebrueahOaguOW/gyBFcHVianMKCmltcG9ydCBFcHViIGZyb20gJ2VwdWJqcyc7IC8vIOW8leWFpSBib29rLmpzIOS4reeahCBhZGRDc3Mg5pa55rOV5p2l5biu5Yqp5pS55Y+Y5YWo5bGA5qC35byPIGluaXRHbG9iYWxTdHlsZSgpLOeUseS6jumcgOimgeWcqOWkmuS4que7hOS7tuS4reS9v+eUqO+8jOaJgOS7peWQjuacn+enu+WFpSBtaXhpbi5qcyDkuK0KLy8gaW1wb3J0IHsgYWRkQ3NzIH0gZnJvbSAnLi4vLi4vdXRpbHMvYm9vayc7Ci8vIOacieWFs+acrOWcsOe8k+WtmOeahOaWh+S7tgoKaW1wb3J0IHsgZ2V0Rm9udEZhbWlseSwgZ2V0Rm9udFNpemUsIGdldExvY2F0aW9uLCBnZXRUaGVtZSwgc2F2ZUZvbnRGYW1pbHksIHNhdmVGb250U2l6ZSwgc2F2ZVRoZW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9jYWxTdG9yYWdlJzsKZ2xvYmFsLmVQdWIgPSBFcHViOwpleHBvcnQgZGVmYXVsdCB7CiAgLy8g5L2/55SoIG1peGlucyDmlrnms5XmnaXlvJXnlKjlvJXlhaXov5vmnaXnmoQgbWl4aW4uanMg5Lit55qE6Ieq5a6a5LmJ5a+56LGhCiAgbWl4aW5zOiBbZWJvb2tNaXhpbl0sCiAgbWV0aG9kczogewogICAgLy8g5L2/55SoIG1hcEFjdGlvbnMg5p2l5byV5YWlIGFjdGlvcy5qcyDkuK3nmoTmlrnms5UsIOW8leWFpeS5i+WQjuWwseWPr+S7peebtOaOpeS9v+eUqCB0aGlzLnh4KCkg5p2l5L2/55SoeHjmlrnms5UKICAgIC8vIOi/mOaYr+i3nyBtYXBHZXR0ZXJzIOS4gOagt++8jOaUvuWFpeWIsCBtaXhpbi5qcyDkuK3pm4bkuK3nrqHnkIYKICAgIC8vIC4uLm1hcEFjdGlvbnMoWydzZXRNZW51VmlzaWJsZSddKSwKICAgIC8vIOWQkeWJjee/u+mhteS6i+S7tgogICAgcHJldlBhZ2U6IGZ1bmN0aW9uIHByZXZQYWdlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gIOmmluWFiOWIpOaWreeUteWtkOS5puaYr+WQpuWtmOWcqO+8jOeEtuWQjuWGjeaJp+ihjAogICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi5wcmV2KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5yZWZyZXNoTG9jYXRpb24oKTsKICAgICAgICB9KTsgLy8g5byV55SoIGhpZGVUaXRsZUFuZE1lbnUg5pa55rOV5p2l5a6e546w57+76aG16ZqQ6JeP6I+c5Y2V5qCPCgogICAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpOwogICAgICB9CiAgICB9LAogICAgLy8g5ZCR5ZCO57+76aG15LqL5Lu2CiAgICBuZXh0UGFnZTogZnVuY3Rpb24gbmV4dFBhZ2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24ubmV4dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnJlZnJlc2hMb2NhdGlvbigpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpOwogICAgICB9CiAgICB9LAogICAgLy8g5by55Ye66I+c5Y2V5qCP5LqL5Lu25LqL5Lu2LOmAmui/hyAkc3RvcmUuZGlzcGF0Y2gg5p2l6LCD55So5ZyodnVleCDkuK3lrprkuYnnmoTmlrnms5Ugc2V0TWVudVZpc2libGXvvIzlkI7pnaLlvJXlhaXkuoYgbWFwQWN0aW9ucyDmnaXlvJXlhaXmlrnms5XvvIzkvb/nlKjmlrnms5Xmm7TliqDkvr/mjbfjgIIKICAgIC8vIOWwhiBhY3Rpb25zIOeLrOeri+WHuuadpeW9ouaIkCBhY3Rpb25zLmpzIOaWh+S7tu+8jOS9v+eUqCBtaXhpbi5qcyDmlofku7bov5vooYzpm4bkuK3lvJXlhaXvvIzmnIDlkI7lvJXlhaUgbWl4aW4uanMg5Y2z5Y+vCiAgICB0b2dnbGVUaXRsZUFuZE1lbnU6IGZ1bmN0aW9uIHRvZ2dsZVRpdGxlQW5kTWVudSgpIHsKICAgICAgdGhpcy5zZXRNZW51VmlzaWJsZSghdGhpcy5tZW51VmlzaWJsZSk7IC8vIOWcqCB0b2dnbGVUaXRsZUFuZE1lbnUg5LqL5Lu26Kem5Y+R5pe277yM5aaC5p6cIG1lbnUg5by55Ye677yM5YiZ5a2X5L2TIFNldHRpbmdGb250IOS4jeWxleekuu+8jOebtOWIsOeCueWHu+inpuWPkSBTZXRTZXR0aW5nVmlzaWJsZeS6i+S7tuaJjeW8ueWHuuWtl+WPt+iuvue9rueql+WPowoKICAgICAgaWYgKHRoaXMubWVudVZpc2libGUpIHsKICAgICAgICB0aGlzLnNldFNldHRpbmdWaXNpYmxlKC0xKTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRGb250RmFtaWx5VmlzaWJsZShmYWxzZSk7CiAgICB9LAogICAgaGlkZVRpdGxlQW5kTWVudTogZnVuY3Rpb24gaGlkZVRpdGxlQW5kTWVudSgpIHsKICAgICAgdGhpcy5zZXRNZW51VmlzaWJsZShmYWxzZSk7IC8vIOmcgOaxgu+8mumakOiXj+iPnOWNleagj+aXtu+8jOS5n+WQjOaXtuaUtui1tyDosIPoioLlrZflj7fnmoToj5zljZXvvIhFYm9va1NldHRpbmdGb25077yJCgogICAgICB0aGlzLnNldFNldHRpbmdWaXNpYmxlKC0xKTsgLy8g6ZyA5rGC77ya6ZqQ6JeP6I+c5Y2V5qCP5pe277yM5Lmf5ZCM5pe25pS26LW3ICBmb250LWZhbWlseSDlvLnlh7rlsYIKCiAgICAgIHRoaXMuc2V0Rm9udEZhbWlseVZpc2libGUoZmFsc2UpOwogICAgfSwKICAgIC8vIOe8k+WtmOeahOaAnei3r++8muWcqCBsb2NhbFN0b3JhZ2UuanMg5Lit5a6a5LmJIGdldCDlkowgc2F2ZSDmlrnms5XvvIzlhYjojrflj5bpobXpnaLkuK3nmoR4eHjvvIzliKTmlq3mmK/lkKblkKvmnIkgeHh477yM5aaC5p6c5rKh5pyJ77yM5YiZ6I635Y+WIHh4eCDlubbkv53lrZggc2F2Ze+8iHh4eO+8ie+8jOWmguaenOacie+8jOWImeaUueWPmOmhtemdoueahCB4eHgg5bGe5oCn77yM5bm25LiU6K6+572u5Li66buY6K6k5Li65LqG57yT5a2YCiAgICAvLyDnvJPlrZjlrZflj7flpKflsI/nmoTmlrnms5XvvIzlnKggaW5pdEVwdWIg5pa55rOV5Lit5riy5p+T5Ye655S15a2Q5Lmm5ZCO6L+b6KGM5byV55SoLAogICAgaW5pdEZvbnRTaXplOiBmdW5jdGlvbiBpbml0Rm9udFNpemUoKSB7CiAgICAgIHZhciBmb250U2l6ZSA9IGdldEZvbnRTaXplKHRoaXMuZmlsZU5hbWUpOwoKICAgICAgaWYgKCFmb250U2l6ZSkgewogICAgICAgIHNhdmVGb250U2l6ZSh0aGlzLmZpbGVOYW1lLCB0aGlzLmRlZmF1bHRGb250U2l6ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24udGhlbWVzLmZvbnRTaXplKGZvbnRTaXplKTsKICAgICAgICB0aGlzLnNldERlZmF1bHRGb250U2l6ZShmb250U2l6ZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnvJPlrZjlrZfkvZPpo47moLznmoTmlrnms5XvvIzlnKggaW5pdEVwdWIg5pa55rOV5Lit5riy5p+T5Ye655S15a2Q5Lmm5ZCO6L+b6KGM5byV55SoCiAgICBpbml0Rm9udEZhbWlseTogZnVuY3Rpb24gaW5pdEZvbnRGYW1pbHkoKSB7CiAgICAgIHZhciBmb250RmFtaWx5ID0gZ2V0Rm9udEZhbWlseSh0aGlzLmZpbGVOYW1lKTsKCiAgICAgIGlmICghZm9udEZhbWlseSkgewogICAgICAgIHNhdmVGb250RmFtaWx5KHRoaXMuZmlsZU5hbWUsIHRoaXMuZGVmYXVsdEZvbnRGYW1pbHkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVuZGl0aW9uLnRoZW1lcy5mb250KGZvbnRGYW1pbHkpOwogICAgICAgIHRoaXMuc2V0RGVmYXVsdEZvbnRGYW1pbHkoZm9udEZhbWlseSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnvJPlrZjkuLvpopjnmoTmlrnms5XvvIzlnKggaW5pdEVwdWIg5pa55rOV5Lit5riy5p+T5Ye655S15a2Q5Lmm5ZCO6L+b6KGM5byV55SoCiAgICBpbml0VGhlbWU6IGZ1bmN0aW9uIGluaXRUaGVtZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZGVmYXVsdFRoZW1lID0gZ2V0VGhlbWUodGhpcy5maWxlTmFtZSk7CgogICAgICBpZiAoIWRlZmF1bHRUaGVtZSkgewogICAgICAgIGRlZmF1bHRUaGVtZSA9IHRoaXMudGhlbWVMaXN0WzBdLm5hbWU7CiAgICAgICAgc2F2ZVRoZW1lKHRoaXMuZmlsZU5hbWUsIGRlZmF1bHRUaGVtZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0RGVmYXVsdFRoZW1lKGRlZmF1bHRUaGVtZSk7CiAgICAgIHRoaXMudGhlbWVMaXN0LmZvckVhY2goZnVuY3Rpb24gKHRoZW1lKSB7CiAgICAgICAgX3RoaXMzLnJlbmRpdGlvbi50aGVtZXMucmVnaXN0ZXIodGhlbWUubmFtZSwgdGhlbWUuc3R5bGUpOwogICAgICB9KTsKICAgICAgdGhpcy5yZW5kaXRpb24udGhlbWVzLnNlbGVjdChkZWZhdWx0VGhlbWUpOwogICAgfSwKICAgIC8vIOa4suafk+eUteWtkOS5pueahOaWueazlQogICAgaW5pdFJlbmRpdGlvbjogZnVuY3Rpb24gaW5pdFJlbmRpdGlvbigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnJlbmRpdGlvbiA9IHRoaXMuYm9vay5yZW5kZXJUbygncmVhZCcsIHsKICAgICAgICB3aWR0aDogaW5uZXJXaWR0aCwKICAgICAgICBoZWlnaHQ6IGlubmVySGVpZ2h0LAogICAgICAgIC8vICDliqDlhaXlvq7kv6HnmoTlhbzlrrnmgKfphY3nva4KICAgICAgICAvLyDnlLHkuo7pg6jliIbnmoTmtY/op4jlmajml6Dms5XmmL7npLog5oqKIGVwdWJqcyDnmoTniYjmnKzmlLnkuLowLjMuNzEgICBjbnBtIGkgZXB1YmpzQDAuMy43MQogICAgICAgIG1ldGhvZDogJ2RlZmF1bHQnCiAgICAgIH0pOyAvLyDmuLLmn5PnlLXlrZDkuaYs5bm25LiU5re75Yqg5LiA5qyh5Yid5aeL5YyW55qE5riy5p+T77yM6K6w5b2V5LiL5Yid5aeL5YyW55qE6buY6K6k5a2X5L2TXOWtl+WPt1zkuLvpopgKCiAgICAgIHZhciBsb2NhdGlvbiA9IGdldExvY2F0aW9uKHRoaXMuZmlsZU5hbWUpOwogICAgICB0aGlzLmRpc3BsYXkobG9jYXRpb24sIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuaW5pdFRoZW1lKCk7CgogICAgICAgIF90aGlzNC5pbml0Rm9udEZhbWlseSgpOwoKICAgICAgICBfdGhpczQuaW5pdEZvbnRTaXplKCk7CgogICAgICAgIF90aGlzNC5pbml0R2xvYmFsU3R5bGUoKTsKICAgICAgfSk7CiAgICAgIHRoaXMucmVuZGl0aW9uLmhvb2tzLmNvbnRlbnQucmVnaXN0ZXIoZnVuY3Rpb24gKGNvbnRlbnRzKSB7CiAgICAgICAgUHJvbWlzZS5hbGwoWy8vIOW9k+WKoOWFpeadpeiHqi5lbnYuZGV2ZWxvcG1lbnQg5paH5Lu25Lit55qEVlVFX0FQUF9SRVNfVVJM5ZCO77yM6ZyA6KaB5bCG5pW05Liq56iL5bqP6YeN5paw5Yqg6L295LiA6YGN5omN6IO95aSf55yL5Yiw5pWI5p6cCiAgICAgICAgY29udGVudHMuYWRkU3R5bGVzaGVldCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMLCAiL2ZvbnRzL2RheXNPbmUuY3NzIikpLCBjb250ZW50cy5hZGRTdHlsZXNoZWV0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZm9udHMvY2FiaW4uY3NzIikpLCBjb250ZW50cy5hZGRTdHlsZXNoZWV0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZm9udHMvbW9udHNlcnJhdC5jc3MiKSksIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTCwgIi9mb250cy90YW5nZXJpbmUuY3NzIikpXSkudGhlbihmdW5jdGlvbiAoKSB7fSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaJi+WKv+aWueazlQogICAgaW5pdEdlc3R1cmU6IGZ1bmN0aW9uIGluaXRHZXN0dXJlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIC8vIOe7meeUteWtkOS5pue7keWumuWxj+W5leeahOaJi+WKv+S6i+S7tiB0b3VjaHN0YXJ0IO+8muinpuaRuOWxj+W5leS6i+S7tiAgdG91Y2hlbmTvvJrnprvlvIDlsY/luZXkuovku7YKICAgICAgLy8g5LqL5Lu25YaF6YOo5pyJ5bGe5oCn5Y+v5Lul5pON5L2c77yM5YW25Lit5pivIHRpbWVTdGFtcOWPr+S7peeUqOS6juiupOWumumVv+aMieWxnuS6juaXoOaViOaTjeS9nO+8jGNoYW5nZWRUb3VjaGVzIOmHjOmdoueahOesrOS4gOS4quWxnuaAp+S4uiDliKTmlq3lh6DmoLnmiYvmjIfnmoTmk43kvZzvvIwKICAgICAgLy8g56ys5LiA5Liq5bGe5oCn5YaF6YOo55qEIGNsaWVudFgg5Li65rC05bmz5pa55ZCR55qE56e75Yqo77yI5qC55o2u5Y+Y5YyW5p2l5Yik5pat5ZCR5bem6L+Y5piv5ZCR5Y+z5YiS5Yqo77yJCiAgICAgIHRoaXMucmVuZGl0aW9uLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgX3RoaXM1LnRvdWNoc3RhcnRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDsKICAgICAgICBfdGhpczUudG91Y2hzdGFydFRpbWUgPSBldmVudC50aW1lU3RhbXA7CiAgICAgIH0pOwogICAgICB0aGlzLnJlbmRpdGlvbi5vbigndG91Y2hlbmQnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgb2Zmc2V0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggLSBfdGhpczUudG91Y2hzdGFydFg7CiAgICAgICAgdmFyIHRpbWUgPSBldmVudC50aW1lU3RhbXAgLSBfdGhpczUudG91Y2hzdGFydFRpbWU7IC8vIGNvbnNvbGUubG9nKG9mZnNldFgsIHRpbWUpOwogICAgICAgIC8vIOmcgOaxgu+8muaJi+aMh+aTjeS9nOeahOS6i+S7tuS4jeiDveWkp+S6jiA1MDAg5q+r56eS77yM5YiS5Yqo55qE6Led56a76KaB5aSn5LqOIDQwCgogICAgICAgIGlmICh0aW1lIDwgNTAwICYmIG9mZnNldFggPiA0MCkgewogICAgICAgICAgX3RoaXM1LnByZXZQYWdlKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aW1lIDwgNTAwICYmIG9mZnNldFggPCAtNDApIHsKICAgICAgICAgIF90aGlzNS5uZXh0UGFnZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczUudG9nZ2xlVGl0bGVBbmRNZW51KCk7CiAgICAgICAgfSAvLyDnpoHmraLkuovku7bnmoTpu5jorqTmlrnms5XosIPnlKjlkozkvKDmkq0KCgogICAgICAgIGlmIChldmVudC5wcmV2ZW50RGVmYXVsdCkgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9CgogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0RXB1YjogZnVuY3Rpb24gaW5pdEVwdWIoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgLy8g5Z2R77ya5LmL5YmN6K6+572uIE5naW54IOaXtuiuvue9ruerr+WPo+WPt+S4uiA4MDgxCiAgICAgIHZhciB1cmwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwgKyAnL2VwdWIvJyArIHRoaXMuZmlsZU5hbWUgKyAnLmVwdWInOyAvLyBjb25zb2xlLmxvZyh1cmwpOwoKICAgICAgdGhpcy5ib29rID0gbmV3IEVwdWIodXJsKTsKICAgICAgdGhpcy5zZXRDdXJyZW50Qm9vayh0aGlzLmJvb2spOwogICAgICB0aGlzLmluaXRSZW5kaXRpb24oKTsKICAgICAgdGhpcy5pbml0R2VzdHVyZSgpOyAvLyDlnKjnlLXlrZDkuablhajpg6jop6PmnpDkuYvlkI7osIPnlKggcmVhZHkKCiAgICAgIHRoaXMuYm9vay5yZWFkeS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LmJvb2subG9jYXRpb25zLmdlbmVyYXRlKDc1MCAqICh3aW5kb3cuaW5uZXJXaWR0aCAvIDM3NSkgKiAoZ2V0Rm9udFNpemUoX3RoaXM2LmZpbGVOYW1lKSAvIDE2KSk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGxvY2F0aW9ucykgewogICAgICAgIF90aGlzNi5zZXRCb29rQXZhaWxhYmxlKHRydWUpOwoKICAgICAgICBfdGhpczYucmVmcmVzaExvY2F0aW9uKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgLy8g5L2/55So55Sf5ZG95ZGo5pyf5Ye95pWw5Lit55qEIG1vdW50ZWQg5pa55rOV5p2l6I635Y+W5Yqo5oCB6Lev55SxCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgIC8vIGNvbnN0IGZpbGVOYW1lID0gdGhpcy4kcm91dGUucGFyYW1zLmZpbGVOYW1lCiAgICAvLyBjb25zb2xlLmxvZyhmaWxlTmFtZSk7CiAgICAvLyBzcGxpdCDmlrnms5XvvJrku6UgeHh4IOS4uueVjOmZkOWIkuWIhuiOt+WPlueahOe7k+aenAogICAgLy8gam9pbiDmlrnms5XvvJrku6UgeHh4IOWwhuiOt+WPlueahOe7k+aenOWQiOW5tuWcqOS4gOi1twogICAgLy8gY29uc3QgYmFzZVVybCA9ICdodHRwOi8vMTkyLjE2OC4zMS4xMzM6ODA4MS9lcHViLycKICAgIC8vIGNvbnN0IGZpbGVOYW1lID0gdGhpcy4kcm91dGUucGFyYW1zLmZpbGVOYW1lLnNwbGl0KCd8Jykuam9pbignLycpCiAgICB0aGlzLnNldEZpbGVOYW1lKHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlTmFtZS5zcGxpdCgnfCcpLmpvaW4oJy8nKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzNy5pbml0RXB1YigpOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":"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","sourcesContent":["<!--用于接收动态路由的组件-->\r\n<template>\r\n  <div class=\"ebook-reader\">\r\n    <div id=\"read\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // 使用 mapGetters 来快速调用 vuex 中的对象\r\n  // import { mapGetters } from 'vuex'\r\n  // 引入 mixin.js 来代替 mapGetter mapActions（mixin.js 集中管理 mapGetters）\r\n  import { ebookMixin } from '../../utils/mixin'\r\n  // 使用 mapActions 原理跟 mapGetters 差不多，mapActions是引入定义在vuex 中 actios 或者是独立出来的 actions.js 中的方法\r\n  // 还是跟 mapGetters 一样，放入到 mixin.js 中集中管理\r\n  // import { mapActions } from 'vuex'\r\n  // 引入本次项目的核心 Epubjs\r\n  import Epub from 'epubjs'\r\n  // 引入 book.js 中的 addCss 方法来帮助改变全局样式 initGlobalStyle(),由于需要在多个组件中使用，所以后期移入 mixin.js 中\r\n  // import { addCss } from '../../utils/book';\r\n  // 有关本地缓存的文件\r\n  import {\r\n    getFontFamily,\r\n    getFontSize, getLocation, getTheme,\r\n    saveFontFamily,\r\n    saveFontSize, saveTheme\r\n  } from '../../utils/localStorage';\r\n  global.ePub = Epub\r\n  export default {\r\n    // 使用 mixins 方法来引用引入进来的 mixin.js 中的自定义对象\r\n    mixins: [ebookMixin],\r\n    methods: {\r\n      // 使用 mapActions 来引入 actios.js 中的方法, 引入之后就可以直接使用 this.xx() 来使用xx方法\r\n      // 还是跟 mapGetters 一样，放入到 mixin.js 中集中管理\r\n      // ...mapActions(['setMenuVisible']),\r\n      // 向前翻页事件\r\n      prevPage() {\r\n      //  首先判断电子书是否存在，然后再执行\r\n        if (this.rendition) {\r\n          this.rendition.prev().then(() => {\r\n            this.refreshLocation()\r\n          })\r\n          // 引用 hideTitleAndMenu 方法来实现翻页隐藏菜单栏\r\n          this.hideTitleAndMenu()\r\n        }\r\n      },\r\n      // 向后翻页事件\r\n      nextPage() {\r\n        if (this.rendition) {\r\n          this.rendition.next().then(() => {\r\n            this.refreshLocation()\r\n          })\r\n          this.hideTitleAndMenu()\r\n        }\r\n      },\r\n      // 弹出菜单栏事件事件,通过 $store.dispatch 来调用在vuex 中定义的方法 setMenuVisible，后面引入了 mapActions 来引入方法，使用方法更加便捷。\r\n      // 将 actions 独立出来形成 actions.js 文件，使用 mixin.js 文件进行集中引入，最后引入 mixin.js 即可\r\n      toggleTitleAndMenu() {\r\n        this.setMenuVisible(!this.menuVisible)\r\n        // 在 toggleTitleAndMenu 事件触发时，如果 menu 弹出，则字体 SettingFont 不展示，直到点击触发 SetSettingVisible事件才弹出字号设置窗口\r\n        if (this.menuVisible) {\r\n          this.setSettingVisible(-1)\r\n        }\r\n        this.setFontFamilyVisible(false)\r\n      },\r\n      hideTitleAndMenu() {\r\n        this.setMenuVisible(false)\r\n        // 需求：隐藏菜单栏时，也同时收起 调节字号的菜单（EbookSettingFont）\r\n        this.setSettingVisible(-1)\r\n        // 需求：隐藏菜单栏时，也同时收起  font-family 弹出层\r\n        this.setFontFamilyVisible(false)\r\n      },\r\n      // 缓存的思路：在 localStorage.js 中定义 get 和 save 方法，先获取页面中的xxx，判断是否含有 xxx，如果没有，则获取 xxx 并保存 save（xxx），如果有，则改变页面的 xxx 属性，并且设置为默认为了缓存\r\n      // 缓存字号大小的方法，在 initEpub 方法中渲染出电子书后进行引用,\r\n      initFontSize() {\r\n        const fontSize = getFontSize(this.fileName)\r\n        if (!fontSize) {\r\n          saveFontSize(this.fileName, this.defaultFontSize)\r\n        } else {\r\n          this.rendition.themes.fontSize(fontSize)\r\n          this.setDefaultFontSize(fontSize)\r\n        }\r\n      },\r\n      // 缓存字体风格的方法，在 initEpub 方法中渲染出电子书后进行引用\r\n      initFontFamily() {\r\n        const fontFamily = getFontFamily(this.fileName)\r\n        if (!fontFamily) {\r\n          saveFontFamily(this.fileName, this.defaultFontFamily)\r\n        } else {\r\n          this.rendition.themes.font(fontFamily)\r\n          this.setDefaultFontFamily(fontFamily)\r\n        }\r\n      },\r\n      // 缓存主题的方法，在 initEpub 方法中渲染出电子书后进行引用\r\n      initTheme() {\r\n          let defaultTheme = getTheme(this.fileName)\r\n          if (!defaultTheme) {\r\n            defaultTheme = this.themeList[0].name\r\n            saveTheme(this.fileName, defaultTheme)\r\n          }\r\n          this.setDefaultTheme(defaultTheme)\r\n          this.themeList.forEach(theme => {\r\n            this.rendition.themes.register(theme.name, theme.style)\r\n          })\r\n          this.rendition.themes.select(defaultTheme)\r\n      },\r\n      // 渲染电子书的方法\r\n      initRendition() {\r\n        this.rendition = this.book.renderTo('read', {\r\n          width: innerWidth,\r\n          height: innerHeight,\r\n          //  加入微信的兼容性配置\r\n          // 由于部分的浏览器无法显示 把 epubjs 的版本改为0.3.71   cnpm i epubjs@0.3.71\r\n          method: 'default'\r\n        })\r\n        // 渲染电子书,并且添加一次初始化的渲染，记录下初始化的默认字体\\字号\\主题\r\n        const location = getLocation(this.fileName)\r\n        this.display(location, () => {\r\n          this.initTheme()\r\n          this.initFontFamily()\r\n          this.initFontSize()\r\n          this.initGlobalStyle()\r\n        })\r\n        this.rendition.hooks.content.register(contents => {\r\n          Promise.all([\r\n            // 当加入来自.env.development 文件中的VUE_APP_RES_URL后，需要将整个程序重新加载一遍才能够看到效果\r\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`),\r\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/cabin.css`),\r\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`),\r\n            contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`)\r\n          ]).then(() => {})\r\n        })\r\n      },\r\n      // 手势方法\r\n      initGesture() {\r\n        // 给电子书绑定屏幕的手势事件 touchstart ：触摸屏幕事件  touchend：离开屏幕事件\r\n        // 事件内部有属性可以操作，其中是 timeStamp可以用于认定长按属于无效操作，changedTouches 里面的第一个属性为 判断几根手指的操作，\r\n        // 第一个属性内部的 clientX 为水平方向的移动（根据变化来判断向左还是向右划动）\r\n        this.rendition.on('touchstart', event => {\r\n          this.touchstartX = event.changedTouches[0].clientX\r\n          this.touchstartTime = event.timeStamp\r\n        })\r\n        this.rendition.on('touchend', event => {\r\n          const offsetX = event.changedTouches[0].clientX - this.touchstartX\r\n          const time = event.timeStamp - this.touchstartTime\r\n          // console.log(offsetX, time);\r\n          // 需求：手指操作的事件不能大于 500 毫秒，划动的距离要大于 40\r\n          if (time < 500 && offsetX > 40) {\r\n            this.prevPage()\r\n          } else if (time < 500 && offsetX < -40) {\r\n            this.nextPage()\r\n          } else {\r\n            this.toggleTitleAndMenu()\r\n          }\r\n          // 禁止事件的默认方法调用和传播\r\n          if (event.preventDefault) {\r\n            event.preventDefault()\r\n          }\r\n          event.stopPropagation()\r\n        })\r\n      },\r\n      initEpub() {\r\n        // 坑：之前设置 Nginx 时设置端口号为 8081\r\n        const url = process.env.VUE_APP_RES_URL + '/epub/' + this.fileName + '.epub'\r\n        // console.log(url);\r\n        this.book = new Epub(url)\r\n        this.setCurrentBook(this.book)\r\n        this.initRendition()\r\n        this.initGesture()\r\n        // 在电子书全部解析之后调用 ready\r\n        this.book.ready.then(() => {\r\n          return this.book.locations.generate(750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16))\r\n          }).then(locations => {\r\n          this.setBookAvailable(true)\r\n          this.refreshLocation()\r\n        })\r\n      }\r\n    },\r\n    // 使用生命周期函数中的 mounted 方法来获取动态路由\r\n    mounted() {\r\n      // const fileName = this.$route.params.fileName\r\n      // console.log(fileName);\r\n      // split 方法：以 xxx 为界限划分获取的结果\r\n      // join 方法：以 xxx 将获取的结果合并在一起\r\n      // const baseUrl = 'http://192.168.31.133:8081/epub/'\r\n      // const fileName = this.$route.params.fileName.split('|').join('/')\r\n      this.setFileName(this.$route.params.fileName.split('|').join('/')).then(() => {\r\n        this.initEpub()\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/ebook"}]}