{"remainingRequest":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/mazhongkai/Desktop/ebook/vue-ebook/src/utils/mixin.js","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/src/utils/mixin.js","mtime":1625813284914},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hemhvbmdrYWkvRGVza3RvcC9lYm9vay92dWUtZWJvb2svbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE0LjZAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdGhlbWVMaXN0IGFzIF90aGVtZUxpc3QsIGFkZENzcywgcmVtb3ZlQWxsQ3NzIH0gZnJvbSAnLi9ib29rJzsKaW1wb3J0IHsgc2F2ZUxvY2F0aW9uIH0gZnJvbSAnLi9sb2NhbFN0b3JhZ2UnOwpleHBvcnQgdmFyIGVib29rTWl4aW4gPSB7CiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2ZpbGVOYW1lJywgJ21lbnVWaXNpYmxlJywgJ3NldHRpbmdWaXNpYmxlJywgJ2RlZmF1bHRGb250U2l6ZScsICdkZWZhdWx0Rm9udEZhbWlseScsICdmb250RmFtaWx5VmlzaWJsZScsICdkZWZhdWx0VGhlbWUnLCAnYm9va0F2YWlsYWJsZScsICdwcm9ncmVzcycsICdzZWN0aW9uJywgJ2lzUGFnaW5hdGluZycsICdjdXJyZW50Qm9vaycsICduYXZpZ2F0aW9uJywgJ2NvdmVyJywgJ21ldGFkYXRhJywgJ3BhZ2luYXRlJywgJ3BhZ2VsaXN0JywgJ29mZnNldFknLCAnaXNCb29rbWFyayddKSksIHt9LCB7CiAgICB0aGVtZUxpc3Q6IGZ1bmN0aW9uIHRoZW1lTGlzdCgpIHsKICAgICAgcmV0dXJuIF90aGVtZUxpc3QodGhpcyk7CiAgICB9CiAgfSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnc2V0RmlsZU5hbWUnLCAnc2V0TWVudVZpc2libGUnLCAnc2V0U2V0dGluZ1Zpc2libGUnLCAnc2V0RGVmYXVsdEZvbnRTaXplJywgJ3NldERlZmF1bHRGb250RmFtaWx5JywgJ3NldEZvbnRGYW1pbHlWaXNpYmxlJywgJ3NldERlZmF1bHRUaGVtZScsICdzZXRCb29rQXZhaWxhYmxlJywgJ3NldFByb2dyZXNzJywgJ3NldFNlY3Rpb24nLCAnc2V0SXNQYWdpbmF0aW5nJywgJ3NldEN1cnJlbnRCb29rJywgJ3NldE5hdmlnYXRpb24nLCAnc2V0Q292ZXInLCAnc2V0TWV0YWRhdGEnLCAnc2V0UGFnaW5hdGUnLCAnc2V0UGFnZWxpc3QnLCAnc2V0T2Zmc2V0WScsICdzZXRJc0Jvb2ttYXJrJ10pKSwge30sIHsKICAgIC8vIOiuvue9ruWFqOWxgOagt+W8j++8jOW8leWFpWJvb2suanPkuK3nmoQgYWRkQ3NzIOaWueazlQogICAgaW5pdEdsb2JhbFN0eWxlOiBmdW5jdGlvbiBpbml0R2xvYmFsU3R5bGUoKSB7CiAgICAgIHJlbW92ZUFsbENzcygpOwoKICAgICAgc3dpdGNoICh0aGlzLmRlZmF1bHRUaGVtZSkgewogICAgICAgIGNhc2UgJ0RlZmF1bHQnOgogICAgICAgICAgYWRkQ3NzKCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvdGhlbWUvdGhlbWVfZGVmYXVsdC5jc3MiKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnRXllJzoKICAgICAgICAgIGFkZENzcygiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMLCAiL3RoZW1lL3RoZW1lX2V5ZS5jc3MiKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnR29sZCc6CiAgICAgICAgICBhZGRDc3MoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTCwgIi90aGVtZS90aGVtZV9nb2xkLmNzcyIpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdOaWdodCc6CiAgICAgICAgICBhZGRDc3MoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTCwgIi90aGVtZS90aGVtZV9uaWdodC5jc3MiKSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIC8vIOeUqOS6juWIt+aWsOW9k+WJjeS9jee9rijnlLHkuo7lnKggRWJvb2tTZXR0aW5nUHJvZ3Jlc3Mg5ZKMIEVib29rUmVhZGVyIOS4remDvemcgOimgeS9v+eUqO+8jOaVheWwhuWFtuaUvuWFpSBtaXhpbikKICAgIHJlZnJlc2hMb2NhdGlvbjogZnVuY3Rpb24gcmVmcmVzaExvY2F0aW9uKCkgewogICAgICB2YXIgY3VycmVudExvY2F0aW9uID0gdGhpcy5jdXJyZW50Qm9vay5yZW5kaXRpb24uY3VycmVudExvY2F0aW9uKCk7CiAgICAgIHZhciBzdGFydENmaSA9IGN1cnJlbnRMb2NhdGlvbi5zdGFydC5jZmk7CiAgICAgIHZhciBwcm9ncmVzcyA9IHRoaXMuY3VycmVudEJvb2subG9jYXRpb25zLnBlcmNlbnRhZ2VGcm9tQ2ZpKHN0YXJ0Q2ZpKTsKICAgICAgdGhpcy5zZXRQcm9ncmVzcyhNYXRoLmZsb29yKHByb2dyZXNzICogMTAwKSk7CiAgICAgIHRoaXMuc2V0U2VjdGlvbihjdXJyZW50TG9jYXRpb24uc3RhcnQuaW5kZXgpOwogICAgICBzYXZlTG9jYXRpb24odGhpcy5maWxlTmFtZSwgc3RhcnRDZmkpOwogICAgfSwKICAgIGRpc3BsYXk6IGZ1bmN0aW9uIGRpc3BsYXkodGFyZ2V0LCBjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRoaXMuY3VycmVudEJvb2sucmVuZGl0aW9uLmRpc3BsYXkodGFyZ2V0KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLnJlZnJlc2hMb2NhdGlvbigpOwoKICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRCb29rLnJlbmRpdGlvbi5kaXNwbGF5KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5yZWZyZXNoTG9jYXRpb24oKTsKCiAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["/Users/mazhongkai/Desktop/ebook/vue-ebook/src/utils/mixin.js"],"names":["mapGetters","mapActions","themeList","addCss","removeAllCss","saveLocation","ebookMixin","computed","methods","initGlobalStyle","defaultTheme","process","env","VUE_APP_RES_URL","refreshLocation","currentLocation","currentBook","rendition","startCfi","start","cfi","progress","locations","percentageFromCfi","setProgress","Math","floor","setSection","index","fileName","display","target","callback","then"],"mappings":";AAAA,SAASA,UAAT,EAAqBC,UAArB,QAAuC,MAAvC;AACA,SAASC,SAAS,IAATA,UAAT,EAAoBC,MAApB,EAA4BC,YAA5B,QAAgD,QAAhD;AACA,SAASC,YAAT,QAA6B,gBAA7B;AAEA,OAAO,IAAMC,UAAU,GAAG;AACxBC,EAAAA,QAAQ,kCACHP,UAAU,CAAC,CACZ,UADY,EAEZ,aAFY,EAGZ,gBAHY,EAIZ,iBAJY,EAKZ,mBALY,EAMZ,mBANY,EAOZ,cAPY,EAQZ,eARY,EASZ,UATY,EAUZ,SAVY,EAWZ,cAXY,EAYZ,aAZY,EAaZ,YAbY,EAcZ,OAdY,EAeZ,UAfY,EAgBZ,UAhBY,EAiBZ,UAjBY,EAkBZ,SAlBY,EAmBZ,YAnBY,CAAD,CADP;AAsBNE,IAAAA,SAtBM,uBAsBM;AACV,aAAOA,UAAS,CAAC,IAAD,CAAhB;AACD;AAxBK,IADgB;AA2BxBM,EAAAA,OAAO,kCACFP,UAAU,CAAC,CACZ,aADY,EAEZ,gBAFY,EAGZ,mBAHY,EAIZ,oBAJY,EAKZ,sBALY,EAMZ,sBANY,EAOZ,iBAPY,EAQZ,kBARY,EASZ,aATY,EAUZ,YAVY,EAWZ,iBAXY,EAYZ,gBAZY,EAaZ,eAbY,EAcZ,UAdY,EAeZ,aAfY,EAgBZ,aAhBY,EAiBZ,aAjBY,EAkBZ,YAlBY,EAmBZ,eAnBY,CAAD,CADR;AAsBL;AACAQ,IAAAA,eAvBK,6BAuBa;AAChBL,MAAAA,YAAY;;AACZ,cAAQ,KAAKM,YAAb;AACE,aAAK,SAAL;AACEP,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,8BAAN;AACA;;AACF,aAAK,KAAL;AACEV,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,0BAAN;AACA;;AACF,aAAK,MAAL;AACEV,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,2BAAN;AACA;;AACF,aAAK,OAAL;AACEV,UAAAA,MAAM,WAAIQ,OAAO,CAACC,GAAR,CAAYC,eAAhB,4BAAN;AACA;AAZJ;AAcD,KAvCI;AAwCL;AACAC,IAAAA,eAzCK,6BAyCa;AAChB,UAAMC,eAAe,GAAG,KAAKC,WAAL,CAAiBC,SAAjB,CAA2BF,eAA3B,EAAxB;AACA,UAAMG,QAAQ,GAAGH,eAAe,CAACI,KAAhB,CAAsBC,GAAvC;AACA,UAAMC,QAAQ,GAAG,KAAKL,WAAL,CAAiBM,SAAjB,CAA2BC,iBAA3B,CAA6CL,QAA7C,CAAjB;AACA,WAAKM,WAAL,CAAiBC,IAAI,CAACC,KAAL,CAAWL,QAAQ,GAAG,GAAtB,CAAjB;AACA,WAAKM,UAAL,CAAgBZ,eAAe,CAACI,KAAhB,CAAsBS,KAAtC;AACAvB,MAAAA,YAAY,CAAC,KAAKwB,QAAN,EAAgBX,QAAhB,CAAZ;AACD,KAhDI;AAiDLY,IAAAA,OAjDK,mBAiDGC,MAjDH,EAiDWC,QAjDX,EAiDqB;AAAA;;AACxB,UAAID,MAAJ,EAAY;AACV,aAAKf,WAAL,CAAiBC,SAAjB,CAA2Ba,OAA3B,CAAmCC,MAAnC,EAA2CE,IAA3C,CAAgD,YAAM;AACpD,UAAA,KAAI,CAACnB,eAAL;;AACA,cAAIkB,QAAJ,EAAcA,QAAQ;AACvB,SAHD;AAID,OALD,MAKO;AACL,aAAKhB,WAAL,CAAiBC,SAAjB,CAA2Ba,OAA3B,GAAqCG,IAArC,CAA0C,YAAM;AAC9C,UAAA,KAAI,CAACnB,eAAL;;AACA,cAAIkB,QAAJ,EAAcA,QAAQ;AACvB,SAHD;AAID;AACF;AA7DI;AA3BiB,CAAnB","sourcesContent":["import { mapGetters, mapActions } from 'vuex';\r\nimport { themeList, addCss, removeAllCss } from './book';\r\nimport { saveLocation } from './localStorage';\r\n\r\nexport const ebookMixin = {\r\n  computed: {\r\n    ...mapGetters([\r\n      'fileName',\r\n      'menuVisible',\r\n      'settingVisible',\r\n      'defaultFontSize',\r\n      'defaultFontFamily',\r\n      'fontFamilyVisible',\r\n      'defaultTheme',\r\n      'bookAvailable',\r\n      'progress',\r\n      'section',\r\n      'isPaginating',\r\n      'currentBook',\r\n      'navigation',\r\n      'cover',\r\n      'metadata',\r\n      'paginate',\r\n      'pagelist',\r\n      'offsetY',\r\n      'isBookmark'\r\n    ]),\r\n    themeList() {\r\n      return themeList(this)\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'setFileName',\r\n      'setMenuVisible',\r\n      'setSettingVisible',\r\n      'setDefaultFontSize',\r\n      'setDefaultFontFamily',\r\n      'setFontFamilyVisible',\r\n      'setDefaultTheme',\r\n      'setBookAvailable',\r\n      'setProgress',\r\n      'setSection',\r\n      'setIsPaginating',\r\n      'setCurrentBook',\r\n      'setNavigation',\r\n      'setCover',\r\n      'setMetadata',\r\n      'setPaginate',\r\n      'setPagelist',\r\n      'setOffsetY',\r\n      'setIsBookmark'\r\n    ]),\r\n    // 设置全局样式，引入book.js中的 addCss 方法\r\n    initGlobalStyle() {\r\n      removeAllCss()\r\n      switch (this.defaultTheme) {\r\n        case 'Default':\r\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_default.css`)\r\n          break\r\n        case 'Eye':\r\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_eye.css`)\r\n          break\r\n        case 'Gold':\r\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_gold.css`)\r\n          break\r\n        case 'Night':\r\n          addCss(`${process.env.VUE_APP_RES_URL}/theme/theme_night.css`)\r\n          break\r\n      }\r\n    },\r\n    // 用于刷新当前位置(由于在 EbookSettingProgress 和 EbookReader 中都需要使用，故将其放入 mixin)\r\n    refreshLocation() {\r\n      const currentLocation = this.currentBook.rendition.currentLocation()\r\n      const startCfi = currentLocation.start.cfi\r\n      const progress = this.currentBook.locations.percentageFromCfi(startCfi)\r\n      this.setProgress(Math.floor(progress * 100))\r\n      this.setSection(currentLocation.start.index)\r\n      saveLocation(this.fileName, startCfi)\r\n    },\r\n    display(target, callback) {\r\n      if (target) {\r\n        this.currentBook.rendition.display(target).then(() => {\r\n          this.refreshLocation()\r\n          if (callback) callback()\r\n        })\r\n      } else {\r\n        this.currentBook.rendition.display().then(() => {\r\n          this.refreshLocation()\r\n          if (callback) callback()\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n"]}]}