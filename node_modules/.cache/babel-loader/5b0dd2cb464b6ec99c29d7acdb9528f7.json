{"remainingRequest":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookSettingProgress.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/src/components/ebook/EbookSettingProgress.vue","mtime":1579925468000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mazhongkai/Desktop/ebook/vue-ebook/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZWJvb2tNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluJzsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2Vib29rTWl4aW5dLAogIG1ldGhvZHM6IHsKICAgIG9uUHJvZ3Jlc3NDaGFuZ2U6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3NDaGFuZ2UocHJvZ3Jlc3MpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuc2V0UHJvZ3Jlc3MocHJvZ3Jlc3MpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmRpc3BsYXlQcm9ncmVzcygpOwoKICAgICAgICBfdGhpcy51cGRhdGVQcm9ncmVzc0JnKCk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uUHJvZ3Jlc3NJbnB1dDogZnVuY3Rpb24gb25Qcm9ncmVzc0lucHV0KHByb2dyZXNzKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zZXRQcm9ncmVzcyhwcm9ncmVzcykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLnVwZGF0ZVByb2dyZXNzQmcoKTsKICAgICAgfSk7CiAgICB9LAogICAgZGlzcGxheVByb2dyZXNzOiBmdW5jdGlvbiBkaXNwbGF5UHJvZ3Jlc3MoKSB7CiAgICAgIHZhciBjZmkgPSB0aGlzLmN1cnJlbnRCb29rLmxvY2F0aW9ucy5jZmlGcm9tUGVyY2VudGFnZSh0aGlzLnByb2dyZXNzIC8gMTAwKTsKICAgICAgdGhpcy5kaXNwbGF5KGNmaSk7CiAgICB9LAogICAgdXBkYXRlUHJvZ3Jlc3NCZzogZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3NCZygpIHsKICAgICAgdGhpcy4kcmVmcy5wcm9ncmVzcy5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICIiLmNvbmNhdCh0aGlzLnByb2dyZXNzLCAiJSAxMDAlIik7CiAgICB9LAogICAgcHJldlNlY3Rpb246IGZ1bmN0aW9uIHByZXZTZWN0aW9uKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNlY3Rpb24gPiAwICYmIHRoaXMuYm9va0F2YWlsYWJsZSkgewogICAgICAgIHRoaXMuc2V0U2VjdGlvbih0aGlzLnNlY3Rpb24gLSAxKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5kaXNwbGF5U2VjdGlvbigpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbmV4dFNlY3Rpb246IGZ1bmN0aW9uIG5leHRTZWN0aW9uKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNlY3Rpb24gPCB0aGlzLmN1cnJlbnRCb29rLnNwaW5lLmxlbmd0aCAtIDEgJiYgdGhpcy5ib29rQXZhaWxhYmxlKSB7CiAgICAgICAgdGhpcy5zZXRTZWN0aW9uKHRoaXMuc2VjdGlvbiArIDEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0LmRpc3BsYXlTZWN0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBkaXNwbGF5U2VjdGlvbjogZnVuY3Rpb24gZGlzcGxheVNlY3Rpb24oKSB7CiAgICAgIHZhciBzZWN0aW9uSW5mbyA9IHRoaXMuY3VycmVudEJvb2suc2VjdGlvbih0aGlzLnNlY3Rpb24pOwoKICAgICAgaWYgKHNlY3Rpb25JbmZvICYmIHNlY3Rpb25JbmZvLmhyZWYpIHsKICAgICAgICB0aGlzLmRpc3BsYXkoc2VjdGlvbkluZm8uaHJlZik7CiAgICAgIH0KICAgIH0KICB9LAogIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQoKSB7CiAgICB0aGlzLnVwZGF0ZVByb2dyZXNzQmcoKTsKICB9Cn07"},{"version":3,"sources":["EbookSettingProgress.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,SAAA,UAAA,QAAA,mBAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,UAAA,CADA;AAEA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,4BACA,QADA,EACA;AAAA;;AACA,WAAA,WAAA,CAAA,QAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,eAAA;;AACA,QAAA,KAAA,CAAA,gBAAA;AACA,OAHA;AAIA,KANA;AAOA,IAAA,eAPA,2BAOA,QAPA,EAOA;AAAA;;AACA,WAAA,WAAA,CAAA,QAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,gBAAA;AACA,OAFA;AAGA,KAXA;AAYA,IAAA,eAZA,6BAYA;AACA,UAAA,GAAA,GAAA,KAAA,WAAA,CAAA,SAAA,CAAA,iBAAA,CAAA,KAAA,QAAA,GAAA,GAAA,CAAA;AACA,WAAA,OAAA,CAAA,GAAA;AACA,KAfA;AAgBA,IAAA,gBAhBA,8BAgBA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,cAAA,aAAA,KAAA,QAAA;AACA,KAlBA;AAmBA,IAAA,WAnBA,yBAmBA;AAAA;;AACA,UAAA,KAAA,OAAA,GAAA,CAAA,IAAA,KAAA,aAAA,EAAA;AACA,aAAA,UAAA,CAAA,KAAA,OAAA,GAAA,CAAA,EAAA,IAAA,CAAA,YAAA;AACA,UAAA,MAAA,CAAA,cAAA;AACA,SAFA;AAGA;AACA,KAzBA;AA0BA,IAAA,WA1BA,yBA0BA;AAAA;;AACA,UAAA,KAAA,OAAA,GAAA,KAAA,WAAA,CAAA,KAAA,CAAA,MAAA,GAAA,CAAA,IAAA,KAAA,aAAA,EAAA;AACA,aAAA,UAAA,CAAA,KAAA,OAAA,GAAA,CAAA,EAAA,IAAA,CAAA,YAAA;AACA,UAAA,MAAA,CAAA,cAAA;AACA,SAFA;AAGA;AACA,KAhCA;AAiCA,IAAA,cAjCA,4BAiCA;AACA,UAAA,WAAA,GAAA,KAAA,WAAA,CAAA,OAAA,CAAA,KAAA,OAAA,CAAA;;AACA,UAAA,WAAA,IAAA,WAAA,CAAA,IAAA,EAAA;AACA,aAAA,OAAA,CAAA,WAAA,CAAA,IAAA;AACA;AACA;AAtCA,GAFA;AA0CA,EAAA,OA1CA,qBA0CA;AACA,SAAA,gBAAA;AACA;AA5CA,CAAA","sourcesContent":["<template>\n  <transition name=\"slide-up\">\n    <div class=\"setting-wrapper\" v-show=\"menuVisible && settingVisible === 2\">\n      <div class=\"setting-progress\">\n        <div class=\"read-time-wrapper\">\n          <span class=\"read-time-text\">{{getReadTimeText()}}</span>\n          <span class=\"icon-forward\"></span>\n        </div>\n        <div class=\"progress-wrapper\">\n          <div class=\"progress-icon-wrapper\" @click=\"prevSection()\">\n            <span class=\"icon-back\"></span>\n          </div>\n          <input class=\"progress\" type=\"range\"\n                 max=\"100\"\n                 min=\"0\"\n                 step=\"1\"\n                 @change=\"onProgressChange($event.target.value)\"\n                 @input=\"onProgressInput($event.target.value)\"\n                 :value=\"progress\"\n                 :disabled=\"!bookAvailable\"\n                 ref=\"progress\">\n          <div class=\"progress-icon-wrapper\" @click=\"nextSection()\">\n            <span class=\"icon-forward\"></span>\n          </div>\n        </div>\n        <div class=\"text-wrapper\">\n          <span class=\"progress-section-text\">{{getSectionName}}</span>\n          <span>({{bookAvailable ? progress + '%' : '加载中...'}})</span>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\n  import { ebookMixin } from '../../utils/mixin'\n\n  export default {\n    mixins: [ebookMixin],\n    methods: {\n      onProgressChange(progress) {\n        this.setProgress(progress).then(() => {\n          this.displayProgress()\n          this.updateProgressBg()\n        })\n      },\n      onProgressInput(progress) {\n        this.setProgress(progress).then(() => {\n          this.updateProgressBg()\n        })\n      },\n      displayProgress() {\n        const cfi = this.currentBook.locations.cfiFromPercentage(this.progress / 100)\n        this.display(cfi)\n      },\n      updateProgressBg() {\n        this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`\n      },\n      prevSection() {\n        if (this.section > 0 && this.bookAvailable) {\n          this.setSection(this.section - 1).then(() => {\n            this.displaySection()\n          })\n        }\n      },\n      nextSection() {\n        if (this.section < this.currentBook.spine.length - 1 && this.bookAvailable) {\n          this.setSection(this.section + 1).then(() => {\n            this.displaySection()\n          })\n        }\n      },\n      displaySection() {\n        const sectionInfo = this.currentBook.section(this.section)\n        if (sectionInfo && sectionInfo.href) {\n          this.display(sectionInfo.href)\n        }\n      }\n    },\n    updated() {\n      this.updateProgressBg()\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .setting-wrapper {\n    position: absolute;\n    bottom: px2rem(48);\n    left: 0;\n    z-index: 160;\n    width: 100%;\n    height: px2rem(90);\n    background: white;\n    box-shadow: 0 px2rem(-8) px2rem(8) rgba(0, 0, 0, .15);\n    .setting-progress {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      .read-time-wrapper {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: px2rem(40);\n        font-size: px2rem(12);\n        @include center;\n      }\n      .progress-wrapper {\n        width: 100%;\n        height: 100%;\n        @include center;\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        .progress-icon-wrapper {\n          font-size: px2rem(20);\n        }\n        .progress {\n          width: 100%;\n          -webkit-appearance: none;\n          height: px2rem(2);\n          margin: 0 px2rem(10);\n          &:focus {\n            outline: none;\n          }\n          &::-webkit-slider-thumb {\n            -webkit-appearance: none;\n            height: px2rem(20);\n            width: px2rem(20);\n            border-radius: 50%;\n            background: white;\n            box-shadow: 0 4px 4px 0 rgba(0, 0, 0, .15);\n            border: px2rem(1) solid #ddd;\n          }\n        }\n      }\n      .text-wrapper {\n        position: absolute;\n        left: 0;\n        bottom: px2rem(10);\n        width: 100%;\n        color: #333;\n        font-size: px2rem(12);\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        @include center;\n        .progress-section-text {\n          @include ellipsis;\n        }\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/components/ebook"}]}